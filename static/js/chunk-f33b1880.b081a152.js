(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f33b1880"],{3887:function(e,r,t){},"3d15":function(e,r,t){"use strict";t.d(r,"a",(function(){return o})),t.d(r,"c",(function(){return s})),t.d(r,"b",(function(){return u})),t.d(r,"d",(function(){return d})),t.d(r,"e",(function(){return p})),t.d(r,"g",(function(){return h})),t.d(r,"f",(function(){return v}));var a=t("1da1"),i=(t("96cf"),t("7424")),n=t("b775");function o(e){return g.apply(this,arguments)}function g(){return g=Object(a["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n["g"])(i["ALARMTRIGGERADD"],n["b"].POST,r));case 1:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}function s(e){return l.apply(this,arguments)}function l(){return l=Object(a["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n["g"])(i["ALARMTRIGGEREDIT"],n["b"].POST,r));case 1:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function u(e){return c.apply(this,arguments)}function c(){return c=Object(a["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n["g"])(i["ALARMTRIGGERDEL"],n["b"].POST,r));case 1:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}function d(){return m.apply(this,arguments)}function m(){return m=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n["g"])(i["ALARMTRIGGERLIST"],n["b"].POST));case 1:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}function p(e){return T.apply(this,arguments)}function T(){return T=Object(a["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n["g"])(i["CURRENTALARMLIST"],n["b"].POST,r));case 1:case"end":return e.stop()}}),e)}))),T.apply(this,arguments)}function h(e){return f.apply(this,arguments)}function f(){return f=Object(a["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n["g"])(i["UPDATECURRENTALARM"],n["b"].POST,r));case 1:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function v(e){return w.apply(this,arguments)}function w(){return w=Object(a["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n["g"])(i["SHIELDALARMLIST"],n["b"].POST,r));case 1:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}},4512:function(e,r,t){"use strict";t.r(r);var a=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("a-card",[t("a-spin",{staticStyle:{"z-index":"9999","margin-right":"-300px"},attrs:{size:"large",spinning:e.ShowRegisterLoading,tip:"Loading..."}},[t("a-drawer",{attrs:{title:e.$t("alarm.trigger.addTriggerTitle"),width:720,visible:e.visible,"body-style":{paddingBottom:"80px"},"after-visible-change":e.afterVisibleChange},on:{close:e.onClose}},[t("a-form",{attrs:{form:e.form,layout:"vertical"}},[t("a-row",{attrs:{gutter:16}},[t("a-col",{attrs:{span:24}},[t("a-form-item",{staticStyle:{"margin-bottom":"5px"},attrs:{label:e.$t("alarm.trigger.TriggerAddName")}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["TriggerAddName",{rules:[{required:!0,message:e.$t("alarm.trigger.TriggerAddName"),whitespace:!0}]}],expression:"['TriggerAddName', {rules: [{ required: true, message: $t('alarm.trigger.TriggerAddName'), whitespace: true}]}]"}],attrs:{autocomplete:"autocomplete"}})],1)],1)],1),t("a-row",{attrs:{gutter:16}},[t("a-col",{attrs:{span:8}},[t("a-form-item",{staticStyle:{"margin-bottom":"5px"},attrs:{label:e.$t("alarm.trigger.DeviceType")}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["DeviceType",{rules:[{required:!0,message:e.$t("alarm.trigger.DeviceType")}]}],expression:"[\n                'DeviceType',\n                {\n                  rules: [{ required: true, message: $t('alarm.trigger.DeviceType') }],\n                },\n              ]"}],attrs:{disabled:e.isEdit},on:{change:e.changeDeviceType}},e._l(e.supportDeviceList,(function(r,a){return t("a-select-option",{key:a,attrs:{value:r.type}},[e._v(" "+e._s(e.$t(r.name))+" ")])})),1)],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-item",{staticStyle:{"margin-bottom":"5px"},attrs:{label:e.$t("alarm.trigger.DeviceModel")}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["DeviceModel",{rules:[{required:!0,message:e.$t("alarm.trigger.DeviceModel")}]}],expression:"[\n                'DeviceModel',\n                {\n                  rules: [{ required: true, message: $t('alarm.trigger.DeviceModel') }],\n                },\n              ]"}],attrs:{allowClear:"",disabled:e.isEdit},on:{change:e.changeDeviceModel}},e._l(e.supportDeviceModelList,(function(r,a){return t("a-select-option",{key:a,attrs:{value:r.uuid}},[e._v(" "+e._s(r.modelName)+" ")])})),1)],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-item",{staticStyle:{"margin-bottom":"5px"},attrs:{label:e.$t("alarm.trigger.DeviceModelData")}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["DeviceModelData",{rules:[{required:!0,message:e.$t("alarm.trigger.DeviceModel")}]}],expression:"[\n                'DeviceModelData',\n                {\n                  rules: [{ required: true, message: $t('alarm.trigger.DeviceModel') }],\n                },\n              ]"}],attrs:{"show-search":"","option-filter-prop":"children","filter-option":e.filterOption}},e._l(e.dataModelList,(function(r,a){return t("a-select-option",{key:a,attrs:{value:r.uuid}},[e._v(" "+e._s(r.name)+" ")])})),1)],1)],1)],1),t("a-row",{attrs:{gutter:16}},[t("a-col",{attrs:{span:8}},[t("a-form-item",{staticStyle:{"margin-bottom":"5px"},attrs:{label:e.$t("alarm.trigger.TriggerCondition")}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["TriggerCondition",{rules:[{required:!0,message:e.$t("alarm.trigger.TriggerCondition")}]}],expression:"[\n                'TriggerCondition',\n                {\n                  rules: [{ required: true, message: $t('alarm.trigger.TriggerCondition') }],\n                },\n              ]"}],attrs:{"show-search":"","option-filter-prop":"children"},on:{change:e.changeCondition}},[t("a-select-option",{attrs:{value:">"}},[e._v(" "+e._s(e.$t("alarm.trigger.TriggerConditionGreater"))+" ")]),t("a-select-option",{attrs:{value:">="}},[e._v(" "+e._s(e.$t("alarm.trigger.TriggerConditionGreaterEq"))+" ")]),t("a-select-option",{attrs:{value:"<"}},[e._v(" "+e._s(e.$t("alarm.trigger.TriggerConditionLess"))+" ")]),t("a-select-option",{attrs:{value:"<="}},[e._v(" "+e._s(e.$t("alarm.trigger.TriggerConditionLessEq"))+" ")]),t("a-select-option",{attrs:{value:"="}},[e._v(" "+e._s(e.$t("alarm.trigger.TriggerConditionEqual"))+" ")]),t("a-select-option",{attrs:{value:"!="}},[e._v(" "+e._s(e.$t("alarm.trigger.TriggerConditionNot"))+" ")]),t("a-select-option",{attrs:{value:"&&"}},[e._v(" "+e._s(e.$t("alarm.trigger.TriggerConditionRange"))+" ")]),t("a-select-option",{attrs:{value:"||"}},[e._v(" "+e._s(e.$t("alarm.trigger.TriggerConditionOutRange"))+" ")])],1)],1)],1),t("a-col",{attrs:{span:8}},[t("a-form-item",{staticStyle:{"margin-bottom":"5px"},attrs:{label:e.$t("alarm.trigger.TriggerConditionXValue")}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["XValue",{rules:[{required:!0,message:e.$t("alarm.trigger.TriggerConditionXValue"),whitespace:!0}]}],expression:"['XValue', {rules: [{ required: true, message: $t('alarm.trigger.TriggerConditionXValue'), whitespace: true}]}]"}],attrs:{autocomplete:"autocomplete"}})],1)],1),"&&"==e.conditionExpress||"||"==e.conditionExpress?t("a-col",{attrs:{span:8}},[t("a-form-item",{staticStyle:{"margin-bottom":"5px"},attrs:{label:e.$t("alarm.trigger.TriggerConditionYValue")}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["YValue",{rules:[{required:!0,message:e.$t("alarm.trigger.TriggerConditionYValue"),whitespace:!0}]}],expression:"['YValue', {rules: [{ required: true, message: $t('alarm.trigger.TriggerConditionYValue'), whitespace: true}]}]"}],attrs:{autocomplete:"autocomplete"}})],1)],1):e._e()],1),t("a-row",{attrs:{gutter:16}},[t("a-col",{attrs:{span:24}},[t("a-form-item",{staticStyle:{"margin-bottom":"5px"}},[t("span",{attrs:{slot:"label"},slot:"label"},[e._v(" "+e._s(e.$t("alarm.trigger.TriggerKeepTime"))+" "),t("a-tooltip",{attrs:{title:e.$t("alarm.trigger.TriggerKeepTimeTips")}},[t("a-icon",{attrs:{type:"question-circle-o"}})],1)],1),t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["TriggerKeepTime",{rules:[{required:!0,message:e.$t("alarm.trigger.TriggerKeepTime")}]}],expression:"[\n                'TriggerKeepTime',\n                {\n                  rules: [{ required: true, message: $t('alarm.trigger.TriggerKeepTime') }],\n                },\n              ]"}],staticStyle:{width:"100%"},attrs:{min:500}})],1)],1)],1),t("a-row",{attrs:{gutter:16}},[t("a-col",{attrs:{span:12}},[t("a-form-item",{staticStyle:{"margin-bottom":"20px"},attrs:{label:e.$t("alarm.trigger.TriggerAlarmSwitch")}},[t("a-switch",{directives:[{name:"decorator",rawName:"v-decorator",value:["TriggerAlarmSwitch",{rules:[{required:!0,message:e.$t("alarm.trigger.TriggerAlarmSwitch")}],initialValue:!1,valuePropName:"checked"}],expression:"['TriggerAlarmSwitch', {rules: [{required: true, message: $t('alarm.trigger.TriggerAlarmSwitch')}],initialValue: false,valuePropName: 'checked'}] "}],on:{change:e.onTriggerAlarmSwitchChange}},[t("a-icon",{attrs:{slot:"checkedChildren",type:"check"},slot:"checkedChildren"}),t("a-icon",{attrs:{slot:"unCheckedChildren",type:"close"},slot:"unCheckedChildren"})],1)],1)],1)],1),t("transition",{attrs:{name:"plus-icon"}},[e.TriggerAlarmSwitchStatus?t("a-row",{attrs:{gutter:16}},[t("section",{staticClass:"code-box"},[t("section",{staticClass:"code-box-meta markdown"},[t("h4",[e._v(e._s(e.$t("alarm.trigger.TriggerAlarmSwitch")))]),t("div",{staticClass:"code-box-actions"},[t("a-col",{attrs:{span:24}},[t("a-form-item",{attrs:{label:e.$t("dataModel.AlarmLevel")}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["AlarmLevel",{rules:[{required:!0,message:e.$t("dataModel.AlarmLevel")}]}],expression:"[\n                'AlarmLevel',\n                {\n                  rules: [{ required: true, message: $t('dataModel.AlarmLevel') }],\n                },\n              ]"}],attrs:{autocomplete:"autocomplete"}},[t("a-select-option",{attrs:{value:"0"}},[e._v(e._s(e.$t("dataModel.alarm.Tips")))]),t("a-select-option",{attrs:{value:"1"}},[e._v(e._s(e.$t("dataModel.alarm.Minor")))]),t("a-select-option",{attrs:{value:"2"}},[e._v(e._s(e.$t("dataModel.alarm.Importance")))]),t("a-select-option",{attrs:{value:"3"}},[e._v(e._s(e.$t("dataModel.alarm.Urgency")))]),t("a-select-option",{attrs:{value:"4"}},[e._v(e._s(e.$t("dataModel.alarm.Deadly")))])],1)],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-item",{staticStyle:{"margin-bottom":"0px"},attrs:{label:e.$t("alarm.trigger.TriggerAlarmShowText")}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["TriggerAlarmShowText",{rules:[{required:!0,message:e.$t("alarm.trigger.TriggerAlarmShowText")}]}],expression:"[\n                'TriggerAlarmShowText',\n                {\n                  rules: [{ required: true, message: $t('alarm.trigger.TriggerAlarmShowText') }],\n                },\n              ]"}],attrs:{rows:4}})],1)],1),t("a-col",{attrs:{span:12}},[t("a-form-item",{staticStyle:{"margin-bottom":"0px"},attrs:{label:e.$t("alarm.trigger.TriggerAlarmHideText")}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["TriggerAlarmHideText",{rules:[{required:!1,message:e.$t("alarm.trigger.TriggerAlarmHideText")}]}],expression:"[\n                'TriggerAlarmHideText',\n                {\n                  rules: [{ required: false, message: $t('alarm.trigger.TriggerAlarmHideText') }],\n                },\n              ]"}],attrs:{rows:4}})],1)],1)],1)])])]):e._e()],1),t("a-row",{attrs:{gutter:16}},[t("a-col",{attrs:{span:12}},[t("a-form-item",{staticStyle:{"margin-bottom":"20px"},attrs:{label:e.$t("alarm.trigger.TriggerLinkageSwitch")}},[t("a-switch",{directives:[{name:"decorator",rawName:"v-decorator",value:["TriggerLinkageSwitch",{rules:[{required:!0,message:e.$t("alarm.trigger.TriggerLinkageSwitch")}],initialValue:!1,valuePropName:"checked"}],expression:"['TriggerLinkageSwitch', {rules: [{required: true, message: $t('alarm.trigger.TriggerLinkageSwitch')}],initialValue: false,valuePropName: 'checked'}] "}],on:{change:e.onTriggerLinkageSwitch}},[t("a-icon",{attrs:{slot:"checkedChildren",type:"check"},slot:"checkedChildren"}),t("a-icon",{attrs:{slot:"unCheckedChildren",type:"close"},slot:"unCheckedChildren"})],1)],1)],1)],1),t("transition",{attrs:{name:"plus-icon"}},[e.TriggerLinkageSwitchStatus?t("a-row",{attrs:{gutter:16}},[t("section",{staticClass:"code-box"},[t("section",{staticClass:"code-box-meta markdown"},[t("h4",[e._v(e._s(e.$t("alarm.trigger.TriggerLinkageSwitch")))]),t("div",{staticClass:"code-box-actions"},[t("a-col",{attrs:{span:24}},[t("a-form-item",{staticStyle:{"margin-bottom":"0px"},attrs:{label:e.$t("alarm.trigger.DeviceLinkModelData")}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["DeviceLinkModelData",{rules:[{required:!0,message:e.$t("alarm.trigger.DeviceLinkModelData")}]}],expression:"[\n                'DeviceLinkModelData',\n                {\n                  rules: [{ required: true, message: $t('alarm.trigger.DeviceLinkModelData') }],\n                },\n              ]"}],attrs:{"show-search":"","option-filter-prop":"children","filter-option":e.filterOption}},e._l(e.dataModelList,(function(r,a){return t("a-select-option",{key:a,attrs:{value:r.uuid}},[e._v(" "+e._s(r.name)+" ")])})),1)],1)],1),t("a-col",{attrs:{span:24}},[t("a-form-item",{staticStyle:{"margin-bottom":"0px"},attrs:{label:e.$t("alarm.trigger.TriggerLinkageAlarmValue")}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["TriggerLinkageAlarmValue",{rules:[{required:!0,message:e.$t("alarm.trigger.TriggerLinkageAlarmValue")}]}],expression:"[\n                'TriggerLinkageAlarmValue',\n                {\n                  rules: [{ required: true, message: $t('alarm.trigger.TriggerLinkageAlarmValue') }],\n                },\n              ]"}]})],1)],1),t("a-col",{attrs:{span:24}},[t("a-form-item",{staticStyle:{"margin-bottom":"0px"},attrs:{label:e.$t("alarm.trigger.TriggerLinkageAlarmClearValue")}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["TriggerLinkageAlarmClearValue",{rules:[{required:!0,message:e.$t("alarm.trigger.TriggerLinkageAlarmClearValue")}]}],expression:"[\n                'TriggerLinkageAlarmClearValue',\n                {\n                  rules: [{ required: true, message: $t('alarm.trigger.TriggerLinkageAlarmClearValue') }],\n                },\n              ]"}]})],1)],1)],1)])])]):e._e()],1)],1),t("div",{style:{position:"absolute",right:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right",zIndex:1}},[e.isEdit?t("a-button",{style:{marginRight:"8px"},attrs:{type:"primary"},on:{click:e.EditTriggerBtn}},[e._v(" "+e._s(e.$t("alarm.trigger.EditTriggerBtn"))+" ")]):t("a-button",{style:{marginRight:"8px"},attrs:{type:"primary"},on:{click:e.AddTriggerBtn}},[e._v(" "+e._s(e.$t("alarm.trigger.AddTriggerBtn"))+" ")]),t("a-button",{on:{click:e.onClose}},[e._v(" "+e._s(e.$t("device.CancelButton"))+" ")])],1)],1)],1),t("a-space",{staticClass:"operator"},[t("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(r){return e.ShowAddTrigger("add")}}},[e._v(e._s(e.$t("dataModel.newModel")))]),t("a-button",{attrs:{type:"default",icon:"sync",loading:e.messageShowLoad},on:{click:e.GetTriggerList}},[e._v(e._s(e.$t("dataModel.refModel")))])],1),t("div",[t("a-spin",{staticStyle:{padding:"1px"},attrs:{spinning:e.messageShowLoad,tip:"Loading..."}},[t("a-table",{attrs:{pagination:e.pagination,columns:e.columns,"data-source":e.dataSource,rowKey:"TriggerName"},scopedSlots:e._u([{key:"TriggerType",fn:function(r){return t("div",{},[1==r?t("span",[e._v(" "+e._s(e.$t("alarm.trigger.TriggerLinkType"))+" ")]):2==r?t("span",[e._v(" "+e._s(e.$t("alarm.trigger.TriggerAlarmType"))+" ")]):3==r?t("span",[e._v(" "+e._s(e.$t("alarm.trigger.TriggerLinkAndAlarmType"))+" ")]):e._e()])}},{key:"UpdatedAt",fn:function(r){return t("div",{},[t("span",[e._v(" "+e._s(e._f("formatDate")(r))+" ")])])}},{key:"action",fn:function(r,a){return t("div",{},[t("a",{staticStyle:{cursor:"pointer",color:"#13C2C2"},attrs:{type:"link"},on:{click:function(r){return e.gotoEditTrigger(a)}}},[t("a-icon",{attrs:{type:"edit"}}),t("span",{staticStyle:{"margin-left":"2px"}},[e._v(e._s(e.$t("alarm.trigger.Detail")))])],1),e._v(" | "),t("a-popconfirm",{attrs:{title:e.$t("dataModel.deleteConfirm")},on:{confirm:function(r){return e.deleteRecord(a)}}},[t("a-icon",{staticStyle:{color:"red"},attrs:{slot:"icon",type:"question-circle-o"},slot:"icon"}),t("a-icon",{attrs:{type:"delete",theme:"twoTone","two-tone-color":"#eb2f96"}}),t("a",{staticStyle:{color:"#eb2f96"}},[e._v(e._s(e.$t("dataModel.delete")))])],1)],1)}}])},[e._l(e.columns,(function(r,a){return t("template",{slot:r.slotName},[t("span",{key:a},[e._v(e._s(e.$t(r.slotName)))])])}))],2)],1)],1)],1)},i=[],n=(t("d3b7"),t("25f0"),t("b0c0"),t("4de4"),t("600d")),o=t("52ae"),g=t("3d15"),s=t("cf45"),l={name:"trigger",i18n:t("89fe"),data:function(){return{pagination:{pageSize:15,showSizeChanger:!0},editTriggerID:0,dataModelList:[],dataLinkModelList:[],ShowRegisterLoading:!1,supportDeviceList:[],supportLinkDeviceList:[],supportDeviceModelList:[],supportLinkDeviceModelList:[],visible:!1,isEdit:!1,DeviceType:0,form:this.$form.createForm(this),messageShowLoad:!1,advanced:!0,TriggerAlarmSwitchStatus:!1,TriggerLinkageSwitchStatus:!1,refIconLoading:!1,columns:[{width:"20%",slotName:"alarm.trigger.TriggerAddName",scopedSlots:{customRender:"TriggerName",title:"alarm.trigger.TriggerAddName"},dataIndex:"TriggerName"},{slotName:"alarm.trigger.TriggerType",width:"10%",scopedSlots:{customRender:"TriggerType",title:"alarm.trigger.TriggerType"},dataIndex:"TriggerType"},{slotName:"alarm.trigger.TriggerCondition",width:"10%",scopedSlots:{customRender:"TriggerCondition",title:"alarm.trigger.TriggerCondition"},dataIndex:"TriggerCondition"},{slotName:"alarm.trigger.TriggerUpdatedAt",width:"10%",scopedSlots:{customRender:"UpdatedAt",title:"alarm.trigger.TriggerUpdatedAt"},dataIndex:"UpdatedAt"},{slotName:"dataModel.modelTableOpt",width:"10%",scopedSlots:{customRender:"action",title:"dataModel.modelTableOpt"}}],dataSource:[],conditionExpress:"",selectedRows:[]}},authorize:{},mounted:function(){this.getSupportDevice()},activated:function(){},filters:{formatDate:function(e){var r=new Date(e);return Object(s["a"])(r,"yyyy-MM-dd hh:mm:ss")}},created:function(){this.dataSource=[],this.getModelList(0),this.GetTriggerList()},watch:{$route:function(){this.getSupportDevice()}},methods:{onTriggerAlarmSwitchChange:function(e){this.TriggerAlarmSwitchStatus=e},onTriggerLinkageSwitch:function(e){this.TriggerLinkageSwitchStatus=e},getDeviceDataModel:function(e,r){var t={muid:r,type:this.DeviceType};1==e?this.dataModelList=[]:this.dataLinkModelList=[];var a=this;this.messageShowLoad=!0,Object(o["a"])(t).then((function(r){if(a.messageShowLoad=!1,r.data.mibs.length>0)for(var t={},i=0;i<r.data.mibs.length;i++)t.id=i.toString(),t.name=r.data.mibs[i].name,t.uuid=r.data.mibs[i].uuid,1==e?a.dataModelList.push(t):a.dataLinkModelList.push(t),t={}}))},changeDeviceType:function(e){this.DeviceType=e,this.dataModelList=[],this.supportDeviceModelList=[],1!=this.isEdit&&this.form.setFieldsValue({DeviceModel:"",DeviceModelData:""}),this.getModelList(1)},changeDeviceModel:function(e){this.dataModelList=[],1!=this.isEdit&&this.form.setFieldsValue({DeviceModelData:""}),this.getDeviceDataModel(1,e)},changeCondition:function(e){this.conditionExpress=e},getSupportDevice:function(){var e=this;Object(n["g"])().then((function(r){e.supportDeviceList=r.data.list,e.supportLinkDeviceList=r.data.list}))},getModelList:function(e){var r=this;1==e?this.supportDeviceModelList=[]:(2==e||(this.supportDeviceModelList=[]),this.supportLinkDeviceModelList=[]);var t={type:this.DeviceType};Object(o["i"])(t).then((function(t){var a={};if(null!=t.data.list)for(var i=0;i<t.data.list.length;i++)a.uuid=t.data.list[i].uuid,a.modelName=t.data.list[i].name,1==e?r.supportDeviceModelList.push(a):(2==e||r.supportDeviceModelList.push(a),r.supportLinkDeviceModelList.push(a)),a={}}))},filterOption:function(e,r){return r.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},deleteRecord:function(e){var r={ID:parseInt(e.ID),name:e.TriggerName},t=this;Object(g["b"])(r).then((function(r){0==r.data.code?(t.dataSource=t.dataSource.filter((function(r){return r.ID!==e.ID})),t.selectedRows=t.selectedRows.filter((function(r){return r.ID!==e.ID}))):2004==r.data.code&&t.$message.error(t.$t("dataModel.modelBand"))})).catch((function(){t.$message.error(t.$t("loginPage.serverError"),3)}))},ShowAddTrigger:function(){this.form.setFieldsValue({TriggerAddName:"",DeviceType:"",DeviceModel:"",DeviceModelData:"",TriggerCondition:"",XValue:"",TriggerAlarmShowText:"",TriggerAlarmHideText:"",TriggerAlarmSwitch:!1,TriggerLinkageSwitch:!1}),this.TriggerAlarmSwitchStatus=!1,this.TriggerLinkageSwitchStatus=!1,this.visible=!0,this.isEdit=!1},AddTriggerBtn:function(){var e=this;0!=this.TriggerAlarmSwitchStatus||0!=this.TriggerLinkageSwitchStatus?this.form.validateFields((function(r){if(!r){var t={TriggerName:e.form.getFieldValue("TriggerAddName"),TriggerDeviceModelUuid:e.form.getFieldValue("DeviceModel"),TriggerModelDataUuid:e.form.getFieldValue("DeviceModelData"),TriggerCondition:e.form.getFieldValue("TriggerCondition"),TriggerDeviceType:parseInt(e.form.getFieldValue("DeviceType")),TriggerXValue:e.form.getFieldValue("XValue"),TriggerKeepTime:parseInt(e.form.getFieldValue("TriggerKeepTime"))};if("&&"!=t.TriggerCondition&&"||"!=t.TriggerCondition||(t.TriggerYValue=e.form.getFieldValue("YValue")),e.TriggerAlarmSwitchStatus&&(t.TriggerAlarmShowText=e.form.getFieldValue("TriggerAlarmShowText"),t.TriggerAlarmHideText=e.form.getFieldValue("TriggerAlarmHideText"),t.TriggerAlarmLevel=parseInt(e.form.getFieldValue("AlarmLevel"))),e.TriggerLinkageSwitchStatus&&(t.TriggerLinkDeviceType=parseInt(e.form.getFieldValue("DeviceType")),t.TriggerLinkdeviceModelUuid=e.form.getFieldValue("DeviceModel"),t.TriggerLinkModelDataUuid=e.form.getFieldValue("DeviceLinkModelData"),t.TriggerLinkageAlarmValue=e.form.getFieldValue("TriggerLinkageAlarmValue"),t.TriggerLinkageAlarmClearValue=e.form.getFieldValue("TriggerLinkageAlarmClearValue")),1==e.TriggerAlarmSwitchStatus&&1==e.TriggerLinkageSwitchStatus)t.TriggerType=3;else if(e.TriggerLinkageSwitchStatus)t.TriggerType=1;else{if(!e.TriggerAlarmSwitchStatus)return void e.$message.error(e.$t("alarm.trigger.TriggerParamsError"),3);t.TriggerType=2}var a=e;Object(g["a"])(t).then((function(e){0==e.data.code?(a.GetTriggerList(),a.visible=!1,a.$message.success(a.$t("alarm.trigger.AddSuccess"),3)):3001==e.data.code?a.$message.error(a.$t("alarm.trigger.NameExist"),3):a.$message.error(a.$t("alarm.trigger.AddFailed"),3)})).catch((function(){a.$message.error(a.$t("loginPage.serverError"),3)}))}})):this.$message.error(this.$t("alarm.trigger.TriggerParamsError"),3)},EditTriggerBtn:function(){var e=this;0!=this.TriggerAlarmSwitchStatus||0!=this.TriggerLinkageSwitchStatus?this.form.validateFields((function(r){if(!r){var t={ID:parseInt(e.editTriggerID),TriggerName:e.form.getFieldValue("TriggerAddName"),TriggerDeviceModelUuid:e.form.getFieldValue("DeviceModel"),TriggerModelDataUuid:e.form.getFieldValue("DeviceModelData"),TriggerCondition:e.form.getFieldValue("TriggerCondition"),TriggerDeviceType:parseInt(e.form.getFieldValue("DeviceType")),TriggerXValue:e.form.getFieldValue("XValue"),TriggerKeepTime:parseInt(e.form.getFieldValue("TriggerKeepTime"))};"&&"!=t.TriggerCondition&&"||"!=t.TriggerCondition||(t.TriggerYValue=e.form.getFieldValue("YValue")),e.TriggerAlarmSwitchStatus&&(t.TriggerAlarmShowText=e.form.getFieldValue("TriggerAlarmShowText"),t.TriggerAlarmHideText=e.form.getFieldValue("TriggerAlarmHideText"),t.TriggerAlarmLevel=parseInt(e.form.getFieldValue("AlarmLevel"))),e.TriggerLinkageSwitchStatus&&(t.TriggerLinkDeviceType=parseInt(e.form.getFieldValue("DeviceType")),t.TriggerLinkdeviceModelUuid=e.form.getFieldValue("DeviceModel"),t.TriggerLinkModelDataUuid=e.form.getFieldValue("DeviceLinkModelData"),t.TriggerLinkageAlarmValue=e.form.getFieldValue("TriggerLinkageAlarmValue"),t.TriggerLinkageAlarmClearValue=e.form.getFieldValue("TriggerLinkageAlarmClearValue")),1==e.TriggerAlarmSwitchStatus&&1==e.TriggerLinkageSwitchStatus?t.TriggerType=3:e.TriggerLinkageSwitchStatus?t.TriggerType=1:e.TriggerAlarmSwitchStatus&&(t.TriggerType=2);var a=e;Object(g["c"])(t).then((function(e){0==e.data.code?(a.GetTriggerList(),a.visible=!1,a.$message.success(a.$t("alarm.trigger.EditSuccess"),3)):3001==e.data.code?a.$message.error(a.$t("alarm.trigger.NameExist"),3):3002==e.data.code&&a.$message.error(a.$t("alarm.trigger.AddFailed"),3)})).catch((function(){a.$message.error(a.$t("loginPage.serverError"),3)}))}})):this.$message.error(this.$t("alarm.trigger.TriggerParamsError"),3)},GetTriggerList:function(){var e=this;this.dataSource=[],this.messageShowLoad=!0,Object(g["d"])().then((function(r){e.messageShowLoad=!1,0==r.data.code&&(e.dataSource=r.data.list)})).catch((function(){e.messageShowLoad=!1,e.$message.error(e.$t("loginPage.serverError"),3)}))},gotoEditTrigger:function(e){var r=this;this.isEdit=!0,this.editTriggerID=e.ID,this.ShowRegisterLoading=!0,this.changeDeviceType(e.TriggerDeviceType),this.changeDeviceModel(e.TriggerDeviceModelUuid),3==e.TriggerType?(this.TriggerAlarmSwitchStatus=!0,this.TriggerLinkageSwitchStatus=!0):1==e.TriggerType?(this.TriggerAlarmSwitchStatus=!1,this.TriggerLinkageSwitchStatus=!0):2==e.TriggerType&&(this.TriggerLinkageSwitchStatus=!1,this.TriggerAlarmSwitchStatus=!0),this.conditionExpress=e.TriggerCondition,setTimeout((function(){r.form.setFieldsValue({TriggerAddName:e.TriggerName,DeviceType:e.TriggerDeviceType,DeviceModel:e.TriggerDeviceModelUuid,DeviceModelData:e.TriggerModelDataUuid,TriggerCondition:e.TriggerCondition,XValue:e.TriggerXValue,TriggerKeepTime:e.TriggerKeepTime.toString()}),"&&"!=e.TriggerCondition&&"||"!=e.TriggerCondition||r.form.setFieldsValue({YValue:e.TriggerYValue}),3==e.TriggerType?r.form.setFieldsValue({TriggerAlarmSwitch:!0,TriggerLinkageSwitch:!0,TriggerAlarmShowText:e.TriggerAlarmShowText,TriggerAlarmHideText:e.TriggerAlarmHideText,AlarmLevel:e.TriggerAlarmLevel.toString(),DeviceLinkModelData:e.TriggerLinkModelDataUuid,TriggerLinkageAlarmValue:e.TriggerLinkageAlarmValue,TriggerLinkageAlarmClearValue:e.TriggerLinkageAlarmClearValue}):1==e.TriggerType?r.form.setFieldsValue({TriggerAlarmSwitch:!1,TriggerLinkageSwitch:!0,DeviceLinkModelData:e.TriggerLinkModelDataUuid,TriggerLinkageAlarmValue:e.TriggerLinkageAlarmValue,TriggerLinkageAlarmClearValue:e.TriggerLinkageAlarmClearValue}):2==e.TriggerType&&r.form.setFieldsValue({TriggerAlarmSwitch:!0,TriggerLinkageSwitch:!1,TriggerAlarmShowText:e.TriggerAlarmShowText,TriggerAlarmHideText:e.TriggerAlarmHideText,AlarmLevel:e.TriggerAlarmLevel.toString()}),r.ShowRegisterLoading=!1}),1e3),this.visible=!0},afterVisibleChange:function(e){e||(this.edit=!1)},onClose:function(){this.visible=!1}}},u=l,c=(t("7d425"),t("2877")),d=Object(c["a"])(u,a,i,!1,null,null,null);r["default"]=d.exports},"52ae":function(e,r,t){"use strict";t.d(r,"d",(function(){return o})),t.d(r,"b",(function(){return s})),t.d(r,"g",(function(){return u})),t.d(r,"j",(function(){return d})),t.d(r,"i",(function(){return p})),t.d(r,"e",(function(){return h})),t.d(r,"h",(function(){return v})),t.d(r,"f",(function(){return S})),t.d(r,"c",(function(){return L})),t.d(r,"a",(function(){return D}));var a=t("1da1"),i=(t("96cf"),t("7424")),n=t("b775");function o(e){return g.apply(this,arguments)}function g(){return g=Object(a["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n["g"])(i["SNMPMODELADD"],n["b"].POST,r));case 1:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}function s(e){return l.apply(this,arguments)}function l(){return l=Object(a["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n["g"])(i["SNMPMODELSINGLE"],n["b"].POST,r));case 1:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function u(e){return c.apply(this,arguments)}function c(){return c=Object(a["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n["g"])(i["SNMPMODELEDIT"],n["b"].POST,r));case 1:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}function d(e){return m.apply(this,arguments)}function m(){return m=Object(a["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n["g"])(i["SAVEMIB"],n["b"].POST,r));case 1:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}function p(e){return T.apply(this,arguments)}function T(){return T=Object(a["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n["g"])(i["SNMPMODELLIST"],n["b"].POST,r));case 1:case"end":return e.stop()}}),e)}))),T.apply(this,arguments)}function h(e){return f.apply(this,arguments)}function f(){return f=Object(a["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n["g"])(i["SNMPMODELDELETE"],n["b"].POST,r));case 1:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function v(e){return w.apply(this,arguments)}function w(){return w=Object(a["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n["g"])(i["GETMIBS"],n["b"].POST,r));case 1:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}function S(e){return b.apply(this,arguments)}function b(){return b=Object(a["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n["g"])(i["DELETEMIBS"],n["b"].POST,r));case 1:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}function L(e){return y.apply(this,arguments)}function y(){return y=Object(a["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n["g"])(i["MODELDATAEDIT"],n["b"].POST,r));case 1:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}function D(e){return A.apply(this,arguments)}function A(){return A=Object(a["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n["g"])(i["GETMIBS"],n["b"].POST,r));case 1:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}},"600d":function(e,r,t){"use strict";t.d(r,"e",(function(){return o})),t.d(r,"b",(function(){return s})),t.d(r,"d",(function(){return u})),t.d(r,"c",(function(){return d})),t.d(r,"f",(function(){return p})),t.d(r,"g",(function(){return h})),t.d(r,"h",(function(){return v})),t.d(r,"a",(function(){return S}));var a=t("1da1"),i=(t("96cf"),t("7424")),n=t("b775");function o(){return g.apply(this,arguments)}function g(){return g=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n["g"])(i["MONITORTREE"],n["b"].POST));case 1:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}function s(e){return l.apply(this,arguments)}function l(){return l=Object(a["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n["g"])(i["MONITORADD"],n["b"].POST,r,{timeout:12e4}));case 1:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function u(e){return c.apply(this,arguments)}function c(){return c=Object(a["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n["g"])(i["MONITOREDIT"],n["b"].POST,r));case 1:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}function d(e){return m.apply(this,arguments)}function m(){return m=Object(a["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n["g"])(i["MONITORDEL"],n["b"].POST,r));case 1:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}function p(e){return T.apply(this,arguments)}function T(){return T=Object(a["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n["g"])(i["MONITORREALDATA"],n["b"].POST,r));case 1:case"end":return e.stop()}}),e)}))),T.apply(this,arguments)}function h(e){return f.apply(this,arguments)}function f(){return f=Object(a["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n["g"])(i["SUPPORTDEVICELIST"],n["b"].POST,r));case 1:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function v(e){return w.apply(this,arguments)}function w(){return w=Object(a["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n["g"])(i["SETDATA"],n["b"].POST,r,{timeout:1e4}));case 1:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}function S(e){return b.apply(this,arguments)}function b(){return b=Object(a["a"])(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n["g"])(i["GETDEVICEMODELDATALIST"],n["b"].POST,r));case 1:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}},"7d425":function(e,r,t){"use strict";t("3887")}}]);