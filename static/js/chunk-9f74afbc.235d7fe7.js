(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9f74afbc"],{"04b1":function(e,t,r){},"32dc":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"TreeBox",staticStyle:{padding:"5px",height:"85vh","overflow-y":"scroll"}},[r("TextBox",{staticStyle:{width:"100%","margin-bottom":"5px"},attrs:{iconCls:"icon-search"},on:{valueChange:function(t){return e.$refs.deviceTree.doFilter(t.currentValue)}}}),r("Tree",{ref:"deviceTree",attrs:{icon:!0,data:e.treeData},on:{selectionChange:function(t){return e.onSelect(t)}}})],1)},i=[],n=(r("d3b7"),r("4de4"),r("d81d"),r("600d")),s={name:"deviceTree",data:function(){return{selection:null,defaultSelectKey:[],selectNode:null,selectKey:null,expandedKeys:[],searchValue:"",dataList:[],findResult:!1,autoExpandParent:!0,treeData:[]}},watch:{$route:function(){this.getMonitorTree()}},mounted:function(){this.getMonitorTree()},methods:{generateList:function(e){for(var t=0;t<e.length;t++){var r=e[t],a=r.key;this.dataList.push({key:a,title:a}),r.children&&this.generateList(r.children)}},getMonitorTree:function(){var e=this;Object(n["e"])().then((function(t){0==t.data.code&&(t.data.list.length>0&&e.$refs.deviceTree.selectNode(t.data.list[0]),e.treeData=t.data.list,null!=e.selectKey&&(e.dataSource=[],e.getTreeChildren(e.selectKey,e.treeData),e.$emit("updateTree",e.dataSource)),0==e.treeData.length&&(e.selectKey=null,e.selectNode=null),e.generateList(e.treeData))}))},checkHavedDevice:function(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.key==e?a.children&&a.children.length>0&&(this.findResult=!0):a.children&&this.checkHavedDevice(e,a.children)}return this.findResult},checkZoneHavedDevice:function(e){return this.findResult=!1,this.checkHavedDevice(e,this.treeData)},checkIsEmpty:function(){return!this.treeData.length},checkChildrenHavedDevice:function(e){if(e&&e.length>0)for(var t=0;t<e.length;t++){var r=e[t];if(1==r.value.type)return!0;r.children&&r.children.length>0&&this.getChildren(r.children)}},getTreeChildren:function(e,t){for(var r=0;r<t.length;r++){var a=t[r];if(a.key==e){var i={key:a.key,no:a.value.ID,nodeName:a.text,nodeType:a.value.type,Status:a.value.Status,extra:a.value};this.dataSource.push(i),this.getChildren(a.children)}else if(a.children){for(var n=!1,s=0;s<a.children.length;s++)if(a.children[s].key==e){n=!0;var o=a.children[s],d={key:o.key,no:o.value.ID,nodeName:o.text,nodeType:o.value.type,Status:o.value.Status,extra:o.value};this.dataSource.push(d),this.getChildren(a.children[s].children);break}n||this.getTreeChildren(e,a.children)}}},getChildren:function(e){if(e&&e.length>0)for(var t=0;t<e.length;t++){var r=e[t],a={key:r.key,no:r.value.ID,nodeName:r.text,Status:r.value.Status,nodeType:r.value.type,extra:r.value};this.dataSource.push(a),r.children&&r.children.length>0&&this.getChildren(r.children)}},onSelect:function(e){0==e.value.type&&(this.editIsDevice=!1,this.selectKey=e.key,this.dataSource=[],this.getTreeChildren(this.selectKey,this.treeData));var t={key:e.key,info:e,tableList:this.dataSource};this.$emit("onSelect",t)},onExpand:function(e){this.expandedKeys=e,this.autoExpandParent=!1},getParentKey:function(e,t){for(var r,a=0;a<t.length;a++){var i=t[a];i.children&&(i.children.some((function(t){return t.key===e}))?r=i.key:this.getParentKey(e,i.children)&&(r=this.getParentKey(e,i.children)))}return r},onChange:function(e){var t=e.target.value,r=this,a=this.dataList.map((function(e){return e.title.indexOf(t)>-1?r.getParentKey(e.key,r.treeData):null})).filter((function(e,t,r){return e&&r.indexOf(e)===t}));this.searchValue=t,this.autoExpandParent=!0,this.expandedKeys=a}}},o=s,d=(r("af63"),r("2877")),c=Object(d["a"])(o,a,i,!1,null,"8cdc5030",null);t["a"]=c.exports},"52ae":function(e,t,r){"use strict";r.d(t,"d",(function(){return s})),r.d(t,"b",(function(){return d})),r.d(t,"g",(function(){return u})),r.d(t,"j",(function(){return m})),r.d(t,"i",(function(){return v})),r.d(t,"e",(function(){return f})),r.d(t,"h",(function(){return y})),r.d(t,"f",(function(){return $})),r.d(t,"c",(function(){return w})),r.d(t,"a",(function(){return D}));var a=r("1da1"),i=(r("96cf"),r("7424")),n=r("b775");function s(e){return o.apply(this,arguments)}function o(){return o=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n["g"])(i["SNMPMODELADD"],n["b"].POST,t));case 1:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}function d(e){return c.apply(this,arguments)}function c(){return c=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n["g"])(i["SNMPMODELSINGLE"],n["b"].POST,t));case 1:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}function u(e){return l.apply(this,arguments)}function l(){return l=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n["g"])(i["SNMPMODELEDIT"],n["b"].POST,t));case 1:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function m(e){return p.apply(this,arguments)}function p(){return p=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n["g"])(i["SAVEMIB"],n["b"].POST,t));case 1:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function v(e){return g.apply(this,arguments)}function g(){return g=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n["g"])(i["SNMPMODELLIST"],n["b"].POST,t));case 1:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}function f(e){return h.apply(this,arguments)}function h(){return h=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n["g"])(i["SNMPMODELDELETE"],n["b"].POST,t));case 1:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function y(e){return b.apply(this,arguments)}function b(){return b=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n["g"])(i["GETMIBS"],n["b"].POST,t));case 1:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}function $(e){return T.apply(this,arguments)}function T(){return T=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n["g"])(i["DELETEMIBS"],n["b"].POST,t));case 1:case"end":return e.stop()}}),e)}))),T.apply(this,arguments)}function w(e){return S.apply(this,arguments)}function S(){return S=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n["g"])(i["MODELDATAEDIT"],n["b"].POST,t));case 1:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}function D(e){return P.apply(this,arguments)}function P(){return P=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n["g"])(i["GETMIBS"],n["b"].POST,t));case 1:case"end":return e.stop()}}),e)}))),P.apply(this,arguments)}},"600d":function(e,t,r){"use strict";r.d(t,"e",(function(){return s})),r.d(t,"b",(function(){return d})),r.d(t,"d",(function(){return u})),r.d(t,"c",(function(){return m})),r.d(t,"f",(function(){return v})),r.d(t,"g",(function(){return f})),r.d(t,"h",(function(){return y})),r.d(t,"a",(function(){return $}));var a=r("1da1"),i=(r("96cf"),r("7424")),n=r("b775");function s(){return o.apply(this,arguments)}function o(){return o=Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n["g"])(i["MONITORTREE"],n["b"].POST));case 1:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}function d(e){return c.apply(this,arguments)}function c(){return c=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n["g"])(i["MONITORADD"],n["b"].POST,t,{timeout:12e4}));case 1:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}function u(e){return l.apply(this,arguments)}function l(){return l=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n["g"])(i["MONITOREDIT"],n["b"].POST,t));case 1:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function m(e){return p.apply(this,arguments)}function p(){return p=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n["g"])(i["MONITORDEL"],n["b"].POST,t));case 1:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function v(e){return g.apply(this,arguments)}function g(){return g=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n["g"])(i["MONITORREALDATA"],n["b"].POST,t));case 1:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}function f(e){return h.apply(this,arguments)}function h(){return h=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n["g"])(i["SUPPORTDEVICELIST"],n["b"].POST,t));case 1:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function y(e){return b.apply(this,arguments)}function b(){return b=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n["g"])(i["SETDATA"],n["b"].POST,t,{timeout:1e4}));case 1:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}function $(e){return T.apply(this,arguments)}function T(){return T=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n["g"])(i["GETDEVICEMODELDATALIST"],n["b"].POST,t));case 1:case"end":return e.stop()}}),e)}))),T.apply(this,arguments)}},"999e":function(e,t,r){},"9c6b":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a-layout",{staticStyle:{height:"100%"},attrs:{id:"components-layout-demo-side"}},[r("a-drawer",{attrs:{title:e.isDevice?e.$t("monitor.AddDevice"):e.$t("monitor.AddZone"),width:720,visible:e.visible,"body-style":{paddingBottom:"80px"},"after-visible-change":e.afterVisibleChange},on:{close:e.onClose}},[e.isDevice?r("a-form",{attrs:{form:e.form,layout:"vertical"}},[r("a-row",{attrs:{gutter:16}},[r("a-col",{attrs:{span:12}},[r("a-form-item",{attrs:{label:e.$t("device.deviceName")}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:e.$t("device.deviceName")}]}],expression:"[\n                  'name',\n                  {\n                    rules: [{ required: true, message: $t('device.deviceName') }],\n                  },\n                ]"}]})],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-item",{attrs:{label:e.$t("monitor.DeviceType")}},[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["DeviceType",{rules:[{required:!0,message:e.$t("monitor.DeviceType")}]}],expression:"[\n                  'DeviceType',\n                  {\n                    rules: [{ required: true, message: $t('monitor.DeviceType') }],\n                  },\n                ]"}],attrs:{disabled:e.edit},on:{change:e.changeDeviceType}},e._l(e.supportDeviceList,(function(t,a){return r("a-select-option",{key:a,attrs:{value:t.type}},[e._v(" "+e._s(e.$t(t.name))+" ")])})),1)],1)],1)],1),r("a-row",{attrs:{gutter:16}},[r("a-col",{attrs:{span:12}},[r("a-form-item",{attrs:{label:e.$t("device.deviceModelName")}},[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["model",{rules:[{required:!0,message:e.$t("device.deviceModelName")}]}],expression:"[\n                  'model',\n                  {\n                    rules: [{ required: true, message: $t('device.deviceModelName') }],\n                  },\n                ]"}],attrs:{disabled:e.edit},on:{select:e.changeModelType}},e._l(e.modelList,(function(t,a){return r("a-select-option",{key:a,attrs:{value:t.uuid}},[e._v(" "+e._s(t.modelName)+" ")])})),1)],1)],1),r("a-col",{staticStyle:{display:"none"},attrs:{span:12}},[r("a-form-item",{attrs:{label:e.$t("device.deviceConfigurationModelName")}},[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["configurationModel",{rules:[{required:!1,message:e.$t("device.deviceConfigurationModelName")}]}],expression:"[\n                  'configurationModel',\n                  {\n                    rules: [{ required: false, message: $t('device.deviceConfigurationModelName') }],\n                  },\n                ]"}],attrs:{disabled:e.edit},on:{select:e.GetDisplayPage}},e._l(e.configurationModel,(function(t,a){return r("a-select-option",{key:a,attrs:{value:t.uuid}},[e._v(" "+e._s(t.name)+" ")])})),1)],1)],1),r("a-col",{staticStyle:{display:"none"},attrs:{span:12}},[r("a-form-item",{attrs:{label:e.$t("device.deviceConfigurationPageName")}},[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["configurationPageUUID",{rules:[{required:!1,message:e.$t("device.deviceConfigurationPageName")}]}],expression:"[\n                  'configurationPageUUID',\n                  {\n                    rules: [{ required: false, message: $t('device.deviceConfigurationPageName') }],\n                  },\n                ]"}],attrs:{disabled:e.edit}},e._l(e.displayPageList,(function(t,a){return r("a-select-option",{key:a,attrs:{value:t.value}},[e._v(" "+e._s(t.label)+" ")])})),1)],1)],1),1==e.DeviceType?r("div",[r("a-col",{attrs:{span:12}},[r("a-form-item",{attrs:{label:e.$t("device.deviceAgent")}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["agentIpaddress",{rules:[{required:!0,message:e.$t("device.deviceAgentEnd")}]}],expression:"[\n                  'agentIpaddress',\n                  {\n                    rules: [{ required: true, message: $t('device.deviceAgentEnd') }],\n                  },\n                ]"}],staticStyle:{width:"100%"}})],1)],1)],1):e._e(),2==e.DeviceType?r("a-col",{attrs:{span:12}},["TCPServer"==e.modbusConnectType?r("a-form-item",[r("span",{attrs:{slot:"label"},slot:"label"},[e._v(" "+e._s(e.$t("device.RegisterPack"))+"  "+e._s(e.$t("device.RegisterPackByte"))+"  "),r("span",{staticStyle:{cursor:"pointer"},on:{click:function(t){return e.copyFn(e.RegisterPackByte)}}},[e._v(e._s(e.RegisterPackByte))])]),r("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["RegisterPack",{rules:[{required:!0,message:e.$t("device.RegisterPack")}]}],expression:"[\n                  'RegisterPack',\n                  {\n                    rules: [{ required: true, message: $t('device.RegisterPack') }],\n                  },\n                ]"}],staticStyle:{width:"100%"},on:{change:function(t){return e.RegisterPack(t,0)}}})],1):e._e()],1):e._e(),"TCPClient"==e.modbusConnectType?r("div",[2==e.DeviceType?r("a-col",{attrs:{span:12}},[r("a-form-item",{attrs:{label:e.$t("dataModel.modbusModel.IpAddress")}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["IPAddress",{rules:[{required:!0,message:e.$t("dataModel.modbusModel.IpAddress"),whitespace:!0}]}],expression:"['IPAddress', {rules: [{ required: true, message: $t('dataModel.modbusModel.IpAddress'), whitespace: true}]}]"}],attrs:{autocomplete:"autocomplete"}})],1)],1):e._e(),2==e.DeviceType?r("a-col",{attrs:{span:12}},[r("a-form-item",{attrs:{label:e.$t("dataModel.modbusModel.Port")}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["Port",{rules:[{required:!0,message:e.$t("dataModel.modbusModel.Port"),whitespace:!0}]}],expression:"['Port', {rules: [{ required: true, message: $t('dataModel.modbusModel.Port'), whitespace: true}]}]"}],attrs:{autocomplete:"autocomplete"}})],1)],1):e._e()],1):e._e(),2==e.DeviceType?r("a-col",{attrs:{span:12}},[r("a-form-item",{attrs:{label:e.$t("device.DeviceAddress")}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["DeviceAddress",{rules:[{required:!0,message:e.$t("device.DeviceAddress")}]}],expression:"[\n                  'DeviceAddress',\n                  {\n                    rules: [{ required: true, message: $t('device.DeviceAddress') }],\n                  },\n                ]"}],staticStyle:{width:"100%"}})],1)],1):e._e(),3==e.DeviceType?r("a-col",{attrs:{span:12}},[r("a-form-item",{attrs:{label:e.$t("device.OPCUAEndPoint")}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["OPCUAEndPoint",{rules:[{required:!0,message:e.$t("device.OPCUAEndPoint"),whitespace:!0}]}],expression:"['OPCUAEndPoint', {rules: [{ required: true, message: $t('device.OPCUAEndPoint'), whitespace: true}]}]"}]})],1)],1):e._e(),15==e.DeviceType?r("div",[r("a-col",{attrs:{span:12}},[r("a-form-item",{attrs:{label:e.$t("dataModel.SimS7Model.IPAddress")}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["IPAddress",{rules:[{required:!0,message:e.$t("dataModel.SimS7Model.Slot"),whitespace:!0}]}],expression:"['IPAddress', {rules: [{ required: true, message: $t('dataModel.SimS7Model.Slot'), whitespace: true}]}]"}]})],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-item",{attrs:{label:e.$t("dataModel.SimS7Model.Slot")}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["Slot",{rules:[{required:!0,message:e.$t("dataModel.SimS7Model.Slot"),whitespace:!0}]}],expression:"['Slot', {rules: [{ required: true, message: $t('dataModel.SimS7Model.Slot'), whitespace: true}]}]"}],attrs:{type:"number",min:"0"}})],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-item",{attrs:{label:e.$t("dataModel.SimS7Model.Rack")}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["Rack",{rules:[{required:!0,message:e.$t("dataModel.SimS7Model.Rack"),whitespace:!0}]}],expression:"['Rack', {rules: [{ required: true, message: $t('dataModel.SimS7Model.Rack'), whitespace: true}]}]"}],attrs:{type:"number",min:"0"}})],1)],1)],1):e._e(),r("a-col",{attrs:{span:12}},[r("a-form-item",{attrs:{label:e.$t("dataModel.TimeOut")}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["timeout",{rules:[{required:!0,message:e.$t("dataModel.TimeOut"),whitespace:!0,initialValue:"1000"}]}],expression:"['timeout', {rules: [{ required: true, message: $t('dataModel.TimeOut'), whitespace: true,initialValue:'1000'}]}]"}],attrs:{type:"number"}})],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-item",{attrs:{label:e.$t("dataModel.FailedTimes")}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["failedTimes",{rules:[{required:!0,message:e.$t("dataModel.FailedTimes"),whitespace:!0,initialValue:"5"}]}],expression:"['failedTimes', {rules: [{ required: true, message: $t('dataModel.FailedTimes'), whitespace: true,initialValue:'5'}]}]"}],attrs:{type:"number"}})],1)],1),5!=e.DeviceType?r("a-col",{attrs:{span:12}},[r("a-form-item",{attrs:{label:e.$t("dataModel.Interval")}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["interval",{rules:[{required:!0,message:e.$t("dataModel.Interval"),whitespace:!0,initialValue:"1000"}]}],expression:"['interval', {rules: [{ required: true, message: $t('dataModel.Interval'), whitespace: true,initialValue:'1000'}]}]"}],attrs:{type:"number"}})],1)],1):e._e()],1),r("a-row",{attrs:{gutter:16}},[r("a-col",{attrs:{span:24}},[r("a-form-item",{attrs:{label:e.$t("device.deviceDec")}},[r("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["description",{rules:[{required:!1,message:e.$t("device.deviceDec")}]}],expression:"[\n                  'description',\n                  {\n                    rules: [{ required: false, message: $t('device.deviceDec') }],\n                  },\n                ]"}],attrs:{rows:4}})],1)],1)],1)],1):e.isDevice?e._e():r("a-form",{attrs:{form:e.form,layout:"vertical"}},[r("a-row",{attrs:{gutter:16}},[r("a-col",{attrs:{span:12}},[r("a-form-item",{attrs:{label:e.$t("monitor.ZoneName")}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:e.$t("device.deviceName")}]}],expression:"[\n                  'name',\n                  {\n                    rules: [{ required: true, message: $t('device.deviceName') }],\n                  },\n                ]"}]})],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-item",{attrs:{label:e.$t("device.deviceConfigurationModelName")}},[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["configurationModel",{rules:[{required:!1,message:e.$t("device.deviceConfigurationModelName")}]}],expression:"[\n                  'configurationModel',\n                  {\n                    rules: [{ required: false, message: $t('device.deviceConfigurationModelName') }],\n                  },\n                ]"}],attrs:{disabled:e.edit}},e._l(e.configurationModel,(function(t,a){return r("a-select-option",{key:a,attrs:{value:t.uuid}},[e._v(" "+e._s(t.name)+" ")])})),1)],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-item",{attrs:{label:e.$t("device.deviceConfigurationPageName")}},[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["configurationPageUUID",{rules:[{required:!1,message:e.$t("device.deviceConfigurationPageName")}]}],expression:"[\n                  'configurationPageUUID',\n                  {\n                    rules: [{ required: false, message: $t('device.deviceConfigurationPageName') }],\n                  },\n                ]"}],attrs:{disabled:e.edit}},e._l(e.displayPageList,(function(t,a){return r("a-select-option",{key:a,attrs:{value:t.value}},[e._v(" "+e._s(t.label)+" ")])})),1)],1)],1)],1),r("a-row",{attrs:{gutter:16}},[r("a-col",{attrs:{span:24}},[r("a-form-item",{attrs:{label:e.$t("monitor.ZoneDes")}},[r("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["description",{rules:[{required:!1,message:e.$t("device.deviceDec")}]}],expression:"[\n                  'description',\n                  {\n                    rules: [{ required: false, message: $t('device.deviceDec') }],\n                  },\n                ]"}],attrs:{rows:4}})],1)],1)],1)],1),r("div",{style:{position:"absolute",right:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right",zIndex:1}},[e.edit?r("a-button",{style:{marginRight:"8px"},attrs:{type:"primary"},on:{click:e.editDeviceOrZone}},[e._v(" "+e._s(e.$t("device.EditButton"))+" ")]):r("a-button",{style:{marginRight:"8px"},attrs:{type:"primary"},on:{click:e.addDeviceOrZone}},[e._v(" "+e._s(e.$t("device.AddButton"))+" ")]),r("a-button",{on:{click:e.onClose}},[e._v(" "+e._s(e.$t("device.CancelButton"))+" ")])],1)],1),r("a-layout-sider",{staticStyle:{background:"#fff","min-width":"300px"}},[r("device-tree",{ref:"deviceTree",staticStyle:{"min-height":"95vh"},on:{onSelect:e.onSelect,updateTree:e.updateTable}})],1),r("a-layout",[r("a-layout-content",{staticStyle:{margin:"0 5px"}},[r("a-card",{staticStyle:{padding:"0px"}},[r("a-space",{staticClass:"operator"},[r("a-button",{directives:[{name:"auth",rawName:"v-auth:role",value:"edit",expression:"`edit`",arg:"role"}],attrs:{type:"default",icon:"plus"},on:{click:function(t){return e.showDrawer("zone")}}},[e._v(e._s(e.$t("monitor.newZone")))]),r("a-button",{directives:[{name:"auth",rawName:"v-auth:role",value:"edit",expression:"`edit`",arg:"role"}],attrs:{type:"primary",icon:"plus"},on:{click:function(t){return e.showDrawer("device")}}},[e._v(e._s(e.$t("monitor.newDevice")))])],1),e.editIsDevice?e.editIsDevice?r("div",[r("a-form",{attrs:{form:e.editForm,layout:"vertical"}},[1==e.editType?r("div",[r("a-row",{attrs:{gutter:16}},[r("a-col",{attrs:{span:12}},[r("a-form-item",{attrs:{label:e.$t("device.deviceName")}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:e.$t("device.deviceName")}]}],expression:"[\n                          'name',\n                          {\n                            rules: [{ required: true, message: $t('device.deviceName') }],\n                          },\n                      ]"}]})],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-item",{attrs:{label:e.$t("monitor.DeviceType")}},[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["DeviceType",{rules:[{required:!0,message:e.$t("monitor.DeviceType")}]}],expression:"[\n                  'DeviceType',\n                  {\n                    rules: [{ required: true, message: $t('monitor.DeviceType') }],\n                  },\n                ]"}],attrs:{disabled:!0},on:{change:e.changeDeviceType}},e._l(e.supportDeviceList,(function(t,a){return r("a-select-option",{key:a,attrs:{value:t.type}},[e._v(" "+e._s(e.$t(t.name))+" ")])})),1)],1)],1)],1),r("a-row",{directives:[{name:"auth",rawName:"v-auth:role",value:"edit",expression:"`edit`",arg:"role"}],attrs:{gutter:16}},[5==e.DeviceType?r("a-col",{attrs:{span:12}},[r("a-form-item",{attrs:{label:e.$t("monitor.DeviceFlag")}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["DeviceFlag",{rules:[{required:!1,message:e.$t("monitor.DeviceFlag")}]}],expression:"[\n                          'DeviceFlag',\n                          {\n                            rules: [{ required: false, message: $t('monitor.DeviceFlag') }],\n                          },\n                      ]"}]})],1)],1):e._e(),r("a-col",{attrs:{span:12}},[r("a-form-item",{attrs:{label:e.$t("device.deviceModelName")}},[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["model",{rules:[{required:!0,message:e.$t("device.deviceModelName")}]}],expression:"[\n                  'model',\n                  {\n                    rules: [{ required: true, message: $t('device.deviceModelName') }],\n                  },\n                ]"}],attrs:{disabled:!0}},e._l(e.modelList,(function(t,a){return r("a-select-option",{key:a,attrs:{value:t.uuid}},[e._v(" "+e._s(t.modelName)+" ")])})),1)],1)],1),r("a-col",{staticStyle:{display:"none"},attrs:{span:12}},[r("a-form-item",{attrs:{label:e.$t("device.deviceConfigurationModelName")}},[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["configurationModel",{rules:[{required:!1,message:e.$t("device.deviceConfigurationModelName")}]}],expression:"[\n                  'configurationModel',\n                  {\n                    rules: [{ required: false, message: $t('device.deviceConfigurationModelName') }],\n                  },\n                ]"}],attrs:{disabled:e.edit},on:{select:e.GetDisplayPage}},e._l(e.configurationModel,(function(t,a){return r("a-select-option",{key:a,attrs:{value:t.uuid}},[e._v(" "+e._s(t.name)+" ")])})),1)],1)],1),r("a-col",{staticStyle:{display:"none"},attrs:{span:12}},[r("a-form-item",{attrs:{label:e.$t("device.deviceConfigurationPageName")}},[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["configurationPageUUID",{rules:[{required:!1,message:e.$t("device.deviceConfigurationPageName")}]}],expression:"[\n                  'configurationPageUUID',\n                  {\n                    rules: [{ required: false, message: $t('device.deviceConfigurationPageName') }],\n                  },\n                ]"}],attrs:{disabled:e.edit}},e._l(e.displayPageList,(function(t,a){return r("a-select-option",{key:a,attrs:{value:t.value}},[e._v(" "+e._s(t.label)+" ")])})),1)],1)],1),1==e.DeviceType?r("div",[r("a-col",{attrs:{span:12}},[r("a-form-item",{attrs:{label:e.$t("device.deviceAgent")}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["agentIpaddress",{rules:[{required:!0,message:e.$t("device.deviceAgentEnd")}]}],expression:"[\n                  'agentIpaddress',\n                  {\n                    rules: [{ required: true, message: $t('device.deviceAgentEnd') }],\n                  },\n                ]"}],staticStyle:{width:"100%"}})],1)],1)],1):e._e(),2==e.DeviceType?r("a-col",{attrs:{span:12}},["TCPServer"==e.modbusConnectType?r("a-form-item",[r("span",{attrs:{slot:"label"},slot:"label"},[e._v(" "+e._s(e.$t("device.RegisterPack"))+"  "+e._s(e.$t("device.RegisterPackByte"))+"  "),r("span",{staticStyle:{cursor:"pointer"},on:{click:function(t){return e.copyFn(e.RegisterPackByte)}}},[e._v(e._s(e.RegisterPackByte))])]),r("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["RegisterPack",{rules:[{required:!0,message:e.$t("device.RegisterPack")}]}],expression:"[\n                  'RegisterPack',\n                  {\n                    rules: [{ required: true, message: $t('device.RegisterPack') }],\n                  },\n                ]"}],staticStyle:{width:"100%"},on:{change:function(t){return e.RegisterPack(t,1)}}})],1):e._e()],1):e._e(),"TCPClient"==e.modbusConnectType?r("div",[2==e.DeviceType?r("a-col",{attrs:{span:12}},[r("a-form-item",{attrs:{label:e.$t("dataModel.modbusModel.IpAddress")}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["IPAddress",{rules:[{required:!0,message:e.$t("dataModel.modbusModel.IpAddress"),whitespace:!0}]}],expression:"['IPAddress', {rules: [{ required: true, message: $t('dataModel.modbusModel.IpAddress'), whitespace: true}]}]"}],attrs:{autocomplete:"autocomplete"}})],1)],1):e._e(),2==e.DeviceType?r("a-col",{attrs:{span:12}},[r("a-form-item",{attrs:{label:e.$t("dataModel.modbusModel.Port")}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["Port",{rules:[{required:!0,message:e.$t("dataModel.modbusModel.Port"),whitespace:!0}]}],expression:"['Port', {rules: [{ required: true, message: $t('dataModel.modbusModel.Port'), whitespace: true}]}]"}],attrs:{autocomplete:"autocomplete"}})],1)],1):e._e()],1):e._e(),2==e.DeviceType?r("a-col",{attrs:{span:12}},[r("a-form-item",{attrs:{label:e.$t("device.DeviceAddress")}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["DeviceAddress",{rules:[{required:!0,message:e.$t("device.DeviceAddress")}]}],expression:"[\n                  'DeviceAddress',\n                  {\n                    rules: [{ required: true, message: $t('device.DeviceAddress') }],\n                  },\n                ]"}],staticStyle:{width:"100%"}})],1)],1):e._e(),3==e.DeviceType?r("a-col",{attrs:{span:12}},[r("a-form-item",{attrs:{label:e.$t("device.OPCUAEndPoint")}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["OPCUAEndPoint",{rules:[{required:!0,message:e.$t("device.OPCUAEndPoint"),whitespace:!0}]}],expression:"['OPCUAEndPoint', {rules: [{ required: true, message: $t('device.OPCUAEndPoint'), whitespace: true}]}]"}]})],1)],1):e._e(),15==e.DeviceType?r("div",[r("a-col",{attrs:{span:12}},[r("a-form-item",{attrs:{label:e.$t("dataModel.SimS7Model.IPAddress")}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["IPAddress",{rules:[{required:!0,message:e.$t("dataModel.SimS7Model.Slot"),whitespace:!0}]}],expression:"['IPAddress', {rules: [{ required: true, message: $t('dataModel.SimS7Model.Slot'), whitespace: true}]}]"}]})],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-item",{attrs:{label:e.$t("dataModel.SimS7Model.Slot")}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["Slot",{rules:[{required:!0,message:e.$t("dataModel.SimS7Model.Slot"),whitespace:!0}]}],expression:"['Slot', {rules: [{ required: true, message: $t('dataModel.SimS7Model.Slot'), whitespace: true}]}]"}],attrs:{type:"number"}})],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-item",{attrs:{label:e.$t("dataModel.SimS7Model.Rack")}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["Rack",{rules:[{required:!0,message:e.$t("dataModel.SimS7Model.Rack"),whitespace:!0}]}],expression:"['Rack', {rules: [{ required: true, message: $t('dataModel.SimS7Model.Rack'), whitespace: true}]}]"}],attrs:{type:"number"}})],1)],1)],1):e._e(),r("a-col",{attrs:{span:12}},[r("a-form-item",{attrs:{label:e.$t("dataModel.TimeOut")}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["timeout",{rules:[{required:!0,message:e.$t("dataModel.TimeOut"),whitespace:!0}]}],expression:"['timeout', {rules: [{ required: true, message: $t('dataModel.TimeOut'), whitespace: true}]}]"}]})],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-item",{attrs:{label:e.$t("dataModel.FailedTimes")}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["failedTimes",{rules:[{required:!0,message:e.$t("dataModel.FailedTimes"),whitespace:!0}]}],expression:"['failedTimes', {rules: [{ required: true, message: $t('dataModel.FailedTimes'), whitespace: true}]}]"}]})],1)],1),r("a-col",{attrs:{span:12}},[5!=e.DeviceType?r("a-form-item",{attrs:{label:e.$t("dataModel.Interval")}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["interval",{rules:[{required:!0,message:e.$t("dataModel.Interval"),whitespace:!0}]}],expression:"['interval', {rules: [{ required: true, message: $t('dataModel.Interval'), whitespace: true}]}]"}]})],1):e._e()],1)],1)],1):0==e.editType?r("div",{directives:[{name:"auth",rawName:"v-auth:role",value:"edit",expression:"`edit`",arg:"role"}]},[r("a-row",{attrs:{gutter:16}},[r("a-col",{attrs:{span:12}},[r("a-form-item",{attrs:{label:e.$t("monitor.ZoneName")}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:e.$t("monitor.ZoneName")}]}],expression:"[\n                  'name',\n                  {\n                    rules: [{ required: true, message: $t('monitor.ZoneName') }],\n                  },\n                ]"}]})],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-item",{attrs:{label:e.$t("device.deviceConfigurationModelName")}},[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["configurationModel",{rules:[{required:!1,message:e.$t("device.deviceConfigurationModelName")}]}],expression:"[\n                  'configurationModel',\n                  {\n                    rules: [{ required: false, message: $t('device.deviceConfigurationModelName') }],\n                  },\n                ]"}],attrs:{disabled:e.edit}},e._l(e.configurationModel,(function(t,a){return r("a-select-option",{key:a,attrs:{value:t.uuid}},[e._v(" "+e._s(t.name)+" ")])})),1)],1)],1),r("a-col",{attrs:{span:12}},[r("a-form-item",{attrs:{label:e.$t("device.deviceConfigurationPageName")}},[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["configurationPageUUID",{rules:[{required:!1,message:e.$t("device.deviceConfigurationPageName")}]}],expression:"[\n                  'configurationPageUUID',\n                  {\n                    rules: [{ required: false, message: $t('device.deviceConfigurationPageName') }],\n                  },\n                ]"}],attrs:{disabled:e.edit}},e._l(e.displayPageList,(function(t,a){return r("a-select-option",{key:a,attrs:{value:t.value}},[e._v(" "+e._s(t.label)+" ")])})),1)],1)],1)],1)],1):e._e(),r("a-row",{directives:[{name:"auth",rawName:"v-auth:role",value:"edit",expression:"`edit`",arg:"role"}],attrs:{gutter:16}},[r("a-col",{attrs:{span:24}},[r("a-form-item",{attrs:{label:e.$t("device.deviceDec")}},[r("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["description",{rules:[{required:!1,message:e.$t("device.deviceDec")}]}],expression:"[\n                  'description',\n                  {\n                    rules: [{ required: false, message: $t('device.deviceDec') }],\n                  },\n                ]"}],attrs:{rows:4}})],1)],1)],1),r("a-form-item",{staticStyle:{"margin-top":"24px"},attrs:{wrapperCol:{span:10,offset:7}}},[r("a-button",{attrs:{type:"primary",htmlType:"submit"},on:{click:e.editDeviceOrZone}},[e._v(e._s(e.$t("dataModel.edit")))]),r("a-popconfirm",{directives:[{name:"auth",rawName:"v-auth:role",value:"edit",expression:"`edit`",arg:"role"}],attrs:{title:e.$t("dataModel.deleteConfirm")},on:{confirm:function(t){return e.deleteRecord(e.editUuid,1)}}},[r("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"danger"}},[e._v(e._s(e.$t("dataModel.delete")))])],1),r("a-button",{staticStyle:{"margin-left":"8px"},on:{click:function(t){return e.backZoneList()}}},[e._v(e._s(e.$t("dataModel.back")))])],1)],1)],1):e._e():r("a-table",{attrs:{rowKey:"no",pagination:e.pagination,columns:e.columns,"data-source":e.tableDataSource},scopedSlots:e._u([{key:"nodeType",fn:function(t){return r("span",{},[0==t?r("div",{staticStyle:{color:"#FFCC00"}},[e._v(" "+e._s(e.$t("monitor.ZoneType"))+" ")]):1==t?r("div",{staticStyle:{color:"#990000"}},[e._v(" "+e._s(e.$t("monitor.DeivceType"))+" ")]):e._e()])}},{key:"Status",fn:function(t,a){return r("span",{},[1==a.nodeType?r("div",{staticStyle:{color:"grey"}},[0==t?r("div",{staticStyle:{color:"grey"}},[e._v(" "+e._s(e.$t("monitor.Offline"))+" ")]):1==t?r("div",{staticStyle:{color:"green"}},[e._v(" "+e._s(e.$t("monitor.Online"))+" ")]):2==t?r("div",{staticStyle:{color:"#e60927"}},[e._v(" "+e._s(e.$t("monitor.NonActivated"))+" ")]):e._e()]):r("div",[e._v(" - ")])])}},{key:"action",fn:function(t,a){return r("div",{},[r("a",{directives:[{name:"auth",rawName:"v-auth:role",value:"edit",expression:"`edit`",arg:"role"}],staticStyle:{cursor:"pointer",color:"#13C2C2"},attrs:{type:"link"},on:{click:function(t){return e.goToEdit(a.extra)}}},[r("a-icon",{attrs:{type:"edit"}}),r("span",{staticStyle:{"margin-left":"2px"}},[e._v(e._s(e.$t("monitor.nodeEdit")))])],1),e._v(" | "),r("a-popconfirm",{directives:[{name:"auth",rawName:"v-auth:role",value:"edit",expression:"`edit`",arg:"role"}],attrs:{title:e.$t("dataModel.deleteConfirm")},on:{confirm:function(t){return e.deleteRecord(a.key,a.nodeType)}}},[r("a-icon",{staticStyle:{color:"red"},attrs:{slot:"icon",type:"question-circle-o"},slot:"icon"}),r("a-icon",{attrs:{type:"delete",theme:"twoTone","two-tone-color":"#eb2f96"}}),r("a",{staticStyle:{color:"#eb2f96"}},[e._v(e._s(e.$t("dataModel.delete")))])],1)],1)}}],null,!1,519923610)},[e._l(e.columns,(function(t,a){return r("template",{slot:t.slotName},[r("span",{key:a},[e._v(e._s(e.$t(t.slotName)))])])}))],2)],1)],1)],1)],1)},i=[],n=(r("d3b7"),r("25f0"),r("ac1f"),r("1276"),r("a15b"),r("5319"),r("b0c0"),r("a4d3"),r("e01a"),r("00b4"),r("d9e2"),r("e9c4"),r("4de4"),r("52ae")),s=r("600d"),o=r("32dc"),d=r("456a"),c={_auchCRCHi:[0,193,129,64,1,192,128,65,1,192,128,65,0,193,129,64,1,192,128,65,0,193,129,64,0,193,129,64,1,192,128,65,1,192,128,65,0,193,129,64,0,193,129,64,1,192,128,65,0,193,129,64,1,192,128,65,1,192,128,65,0,193,129,64,1,192,128,65,0,193,129,64,0,193,129,64,1,192,128,65,0,193,129,64,1,192,128,65,1,192,128,65,0,193,129,64,0,193,129,64,1,192,128,65,1,192,128,65,0,193,129,64,1,192,128,65,0,193,129,64,0,193,129,64,1,192,128,65,1,192,128,65,0,193,129,64,0,193,129,64,1,192,128,65,0,193,129,64,1,192,128,65,1,192,128,65,0,193,129,64,0,193,129,64,1,192,128,65,1,192,128,65,0,193,129,64,1,192,128,65,0,193,129,64,0,193,129,64,1,192,128,65,0,193,129,64,1,192,128,65,1,192,128,65,0,193,129,64,1,192,128,65,0,193,129,64,0,193,129,64,1,192,128,65,1,192,128,65,0,193,129,64,0,193,129,64,1,192,128,65,0,193,129,64,1,192,128,65,1,192,128,65,0,193,129,64],_auchCRCLo:[0,192,193,1,195,3,2,194,198,6,7,199,5,197,196,4,204,12,13,205,15,207,206,14,10,202,203,11,201,9,8,200,216,24,25,217,27,219,218,26,30,222,223,31,221,29,28,220,20,212,213,21,215,23,22,214,210,18,19,211,17,209,208,16,240,48,49,241,51,243,242,50,54,246,247,55,245,53,52,244,60,252,253,61,255,63,62,254,250,58,59,251,57,249,248,56,40,232,233,41,235,43,42,234,238,46,47,239,45,237,236,44,228,36,37,229,39,231,230,38,34,226,227,35,225,33,32,224,160,96,97,161,99,163,162,98,102,166,167,103,165,101,100,164,108,172,173,109,175,111,110,174,170,106,107,171,105,169,168,104,120,184,185,121,187,123,122,186,190,126,127,191,125,189,188,124,180,116,117,181,119,183,182,118,114,178,179,115,177,113,112,176,80,144,145,81,147,83,82,146,150,86,87,151,85,149,148,84,156,92,93,157,95,159,158,94,90,154,155,91,153,89,88,152,136,72,73,137,75,139,138,74,78,142,143,79,141,77,76,140,68,132,133,69,135,71,70,134,130,66,67,131,65,129,128,64],CRC16:function(e){for(var t=255,r=255,a=0;a<e.length;a++){var i=t^e[a];t=r^c._auchCRCHi[i],r=c._auchCRCLo[i]}return c.padLeft((t<<8|r).toString(16).toUpperCase(),4,"0")},isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},ToCRC16:function(e){return c.CRC16(c.isArray(e)?e:c.strToByte(e))},ToModbusCRC16:function(e){return c.CRC16(c.isArray(e)?e:c.strToHex(e))},strToByte:function(e){for(var t=e.split(""),r=[],a=0,i=t.length;a<i;a++){var n=encodeURI(t[a]);if(1==n.length)r.push(n.charCodeAt());else for(var s=n.split("%"),o=1;o<s.length;o++)r.push(parseInt("0x"+s[o]))}return r},convertChinese:function(e){for(var t=e.split(""),r=[],a=0,i=t.length;a<i;a++){var n=t[a].charCodeAt();n<=0||n>=127?r.push(n.toString(16)):r.push(t[a])}return r},filterChinese:function(e){for(var t=e.split(""),r=[],a=0,i=t.length;a<i;a++){var n=t[a].charCodeAt();n>0&&n<127&&r.push(t[a])}return r},strToHex:function(e,t){e=t?c.filterChinese(e).join(""):c.convertChinese(e).join(""),e=e.replace(/\s/g,""),e+=e.length%2!=0?" ":"";for(var r=e.length/2,a=[],i=0;i<r;i++)a.push(parseInt(e.substr(2*i,2),16));return a},padLeft:function(e,t,r){void 0==r&&(r="0");for(var a=0,i=t-e.length;a<i;a++)e=r+e;return e}},u="updatable",l={name:"ISMDeviceConfig",i18n:r("89fe"),data:function(){return{pagination:{pageSize:15,showSizeChanger:!0},RegisterPackByte:"",displayPageList:[],dataList:[],configurationModel:[],editType:0,selectNode:null,selectKey:null,form:this.$form.createForm(this),editForm:this.$form.createForm(this),edit:!1,DeviceType:0,editIsDevice:!1,editUuid:"",isDevice:!1,visible:!1,expandedKeys:[],supportDeviceList:[],modbusConnectType:"",columns:[{width:"5%",slotName:"monitor.nodeIndex",scopedSlots:{customRender:"serial",title:"monitor.nodeIndex"},dataIndex:"no"},{width:"20%",slotName:"monitor.nodeName",scopedSlots:{customRender:"serial",title:"monitor.nodeName"},dataIndex:"nodeName"},{slotName:"monitor.nodeType",width:"10%",scopedSlots:{customRender:"nodeType",title:"monitor.nodeType"},dataIndex:"nodeType"},{slotName:"monitor.Status",width:"10%",scopedSlots:{customRender:"Status",title:"monitor.Status"},dataIndex:"Status"},{slotName:"dataModel.modelTableOpt",width:"10%",scopedSlots:{customRender:"action",title:"dataModel.modelTableOpt"}}],tableDataSource:[],selectedRows:[],searchValue:"",modelList:[],autoExpandParent:!0,treeData:[]}},components:{deviceTree:o["a"]},mounted:function(){this.getSupportDevice(),this.getConfigurationModel()},watch:{$route:function(){this.getSupportDevice(),this.getConfigurationModel()}},methods:{copyFn:function(e){var t=document.createElement("input");t.setAttribute("value",e),document.body.appendChild(t),t.select();try{var r=document.execCommand("copy");r&&(document.body.removeChild(t),this.$message.success(this.$t("device.CopySuccess")))}catch(a){this.$message.error(this.$t("device.CopyFailed"))}},RegisterPack:function(e,t){this.$nextTick((function(){var e="";e=1==t?this.editForm.getFieldValue("RegisterPack"):this.form.getFieldValue("RegisterPack"),this.RegisterPackByte=this.Value2Bytes(e)}))},Value2Bytes:function(e){e=parseInt(e),e=e.toString(16);for(var t=e,r=(t+"").length;r<8;r=t.length)t="0"+t;t="FF"+t,t+=c.ToModbusCRC16(t,!0);var a="";while(t.length>=2){var i=t.substring(0,2);t=t.substring(2,t.length),a=a+i+" "}return a},getSupportDevice:function(){var e=this;Object(s["g"])().then((function(t){e.supportDeviceList=t.data.list}))},getConfigurationModel:function(){this.configurationModel=[];var e=this,t={type:1};Object(d["i"])(t).then((function(t){var r={};if(null!=t.data.list)for(var a=0;a<t.data.list.length;a++)r.name=t.data.list[a].name,r.description=t.data.list[a].description,r.uuid=t.data.list[a].displayUid,e.configurationModel.push(r),r={}}))},GetDisplayPage:function(e){var t={muid:e},r=this;this.displayPageList=[],Object(d["j"])(t).then((function(e){if(0==e.data.code){var t=e.data.layer;if(t.length>0)for(var a=0;a<t.length;a++){var i={};i.label=t[a].PageName,i.value=t[a].PageId,i.pageType=t[a].PageType,i.pageModelUuid=t[a].modelId,r.displayPageList.push(i)}}}))},afterVisibleChange:function(e){e||(this.edit=!1)},validateIPAddress:function(e,t,r){var a=/^((2(5[0-5]|[0-4]\d))|[0-1]?\d{1,2})(\.((2(5[0-5]|[0-4]\d))|[0-1]?\d{1,2})){3}$/,i=t.split(","),n=!0;if(i.length)for(var s=0;s<i.length;s++)0==a.test(i[s])&&(n=!1);if(""==t)return r(new Error("请输入iP地址"));n?r():r(new Error("请输入正确对ip地址"))},showDrawer:function(e){this.isDevice="device"==e,this.visible=!0},onClose:function(){this.visible=!1},addDeviceOrZone:function(e){var t=this;e.preventDefault();var r=this;this.form.validateFields((function(e){if(!e){if(null==t.selectNode||1==t.selectNode.value.type)return void t.$message.error(t.$t("monitor.SelectZoneTips"));var a={};t.isDevice?(a={type:1,name:t.form.getFieldValue("name"),timeout:parseInt(t.form.getFieldValue("timeout")),interval:parseInt(t.form.getFieldValue("interval")),failedTimes:parseInt(t.form.getFieldValue("failedTimes")),muid:t.form.getFieldValue("model"),configUid:t.form.getFieldValue("configurationModel"),PageUUID:t.form.getFieldValue("configurationPageUUID"),deviceType:parseInt(t.form.getFieldValue("DeviceType")),description:t.form.getFieldValue("description")},1==a.deviceType?a.extra=JSON.stringify({snmp:{ipaddress:t.form.getFieldValue("agentIpaddress")}}):2==a.deviceType?a.extra=JSON.stringify({modbus:{IPAddress:t.form.getFieldValue("IPAddress")?t.form.getFieldValue("IPAddress"):null,Port:t.form.getFieldValue("Port")?t.form.getFieldValue("Port"):null,address:t.form.getFieldValue("DeviceAddress"),RegisterPack:t.form.getFieldValue("RegisterPack")?parseInt(t.form.getFieldValue("RegisterPack")):-1}}):3==a.deviceType?a.extra=JSON.stringify({OpcuaExtraData:{endpoint:t.form.getFieldValue("OPCUAEndPoint")}}):15==a.deviceType&&(a.extra=JSON.stringify({SimS7:{IpAddress:t.form.getFieldValue("IPAddress"),Slot:t.form.getFieldValue("Slot"),Rack:t.form.getFieldValue("Rack")}}))):a={type:0,name:t.form.getFieldValue("name"),description:t.form.getFieldValue("description"),configUid:t.form.getFieldValue("configurationModel"),PageUUID:t.form.getFieldValue("configurationPageUUID")},t.$refs.deviceTree.checkIsEmpty()||null==t.selectNode?a.pid=0:a.pid=t.selectNode.value.sid,t.$message.loading({content:"Waiting...",loadingKey:u,duration:0}),Object(s["b"])(a).then((function(e){0==e.data.code?(r.$refs.deviceTree.getMonitorTree(),r.visible=!1,r.$message.success(r.$t("device.DeviceAddSuccess"))):3001==e.data.code?r.$message.error(r.$t("device.DeviceExist")):3003==e.data.code?r.$message.error(r.$t("device.DeviceAddressExist")):r.$message.error(r.$t("device.DeviceAddFailed")),setTimeout((function(){r.$message.destroy()}),500)})).catch((function(){r.$message.error(r.$t("device.DeviceAddFailed")),setTimeout((function(){r.$message.destroy()}),500)}))}}))},editDeviceOrZone:function(e){var t=this;e.preventDefault(),this.editForm.validateFields((function(e){if(!e){var r={},a=t;t.isDevice?(r={uuid:t.editUuid,editData:{type:1,name:t.editForm.getFieldValue("name"),muid:t.editForm.getFieldValue("model"),configUid:t.editForm.getFieldValue("configurationModel"),PageUUID:t.editForm.getFieldValue("configurationPageUUID"),timeout:parseInt(t.editForm.getFieldValue("timeout")),interval:parseInt(t.editForm.getFieldValue("interval")),failedTimes:parseInt(t.editForm.getFieldValue("failedTimes")),deviceType:parseInt(t.editForm.getFieldValue("DeviceType")),description:t.editForm.getFieldValue("description")}},1==r.editData.deviceType?r.editData.extra=JSON.stringify({snmp:{ipaddress:t.editForm.getFieldValue("agentIpaddress")}}):2==r.editData.deviceType?r.editData.extra=JSON.stringify({modbus:{IPAddress:t.editForm.getFieldValue("IPAddress")?t.editForm.getFieldValue("IPAddress"):null,Port:t.editForm.getFieldValue("Port")?t.editForm.getFieldValue("Port"):null,address:t.editForm.getFieldValue("DeviceAddress"),RegisterPack:t.editForm.getFieldValue("RegisterPack")?parseInt(t.editForm.getFieldValue("RegisterPack")):-1}}):3==r.editData.deviceType?r.editData.extra=JSON.stringify({OpcuaExtraData:{endpoint:t.editForm.getFieldValue("OPCUAEndPoint")}}):15==r.editData.deviceType&&(r.editData.extra=JSON.stringify({SimS7:{IpAddress:t.editForm.getFieldValue("IPAddress"),Slot:t.editForm.getFieldValue("Slot"),Rack:t.editForm.getFieldValue("Rack")}}))):r={uuid:t.editUuid,editData:{type:0,name:t.editForm.getFieldValue("name"),description:t.editForm.getFieldValue("description"),configUid:t.editForm.getFieldValue("configurationModel"),PageUUID:t.editForm.getFieldValue("configurationPageUUID")}},t.$message.loading({content:"Waiting...",loadingKey:u,duration:0}),Object(s["d"])(r).then((function(e){0==e.data.code?(a.$refs.deviceTree.getMonitorTree(),a.visible=!1,a.$message.success(a.$t("monitor.EditSuccess"))):a.$message.error(a.$t("monitor.EditFailed")),a.$message.destroy()}))}}))},onSelect:function(e){var t=e.info,r=this;this.selectNode=t,1==this.selectNode.value.type?(this.isDevice=!0,this.goToEdit(this.selectNode.value)):(this.editIsDevice=!1,this.isDevice=!1,this.selectKey=e.key,r.tableDataSource=e.tableList)},getModelList:function(){var e=this;this.modelList=[];var t={type:this.DeviceType};Object(n["i"])(t).then((function(t){var r={};if(null!=t.data.list)for(var a=0;a<t.data.list.length;a++)r.uuid=t.data.list[a].uuid,r.modelName=t.data.list[a].name,r.modbusConnectType=t.data.list[a].modbusConnectType,e.modelList.push(r),r={}}))},goToEdit:function(e){if(this.editUuid=e.uuid,this.editType=e.type,this.editIsDevice=!0,""!=e.configUid&&this.GetDisplayPage(e.configUid),1==e.type){this.isDevice=!0;var t=this;this.DeviceType=e.deviceType;var r={};try{r=JSON.parse(e.extra)}catch(i){r={}}this.getModelList(),this.$message.loading(this.$t("monitor.loading"),.5),setTimeout((function(){t.editForm.setFieldsValue({name:e.name,DeviceType:e.deviceType,model:e.muid,configurationModel:e.configUid,configurationPageUUID:e.PageUUID,description:e.description,timeout:e.timeout.toString(),interval:e.interval.toString(),failedTimes:e.failedTimes.toString()}),1==e.deviceType?t.editForm.setFieldsValue({agentIpaddress:r.snmp.ipaddress}):2==e.deviceType?(t.editForm.setFieldsValue({DeviceAddress:r.modbus.address}),"undefined"!=typeof r.modbus.RegisterPack&&-1!=r.modbus.RegisterPack?(t.modbusConnectType="TCPServer",t.$nextTick((function(){t.RegisterPackByte=t.Value2Bytes(r.modbus.RegisterPack),t.editForm.setFieldsValue({RegisterPack:r.modbus.RegisterPack})}))):null!=r.modbus.IPAddress&&null!=r.modbus.Port?(t.modbusConnectType="TCPClient",t.$nextTick((function(){t.editForm.setFieldsValue({IPAddress:r.modbus.IPAddress,Port:r.modbus.Port})}))):t.modbusConnectType=""):3==e.deviceType?t.editForm.setFieldsValue({OPCUAEndPoint:r.OpcuaExtraData.endpoint}):5==e.deviceType?t.editForm.setFieldsValue({DeviceFlag:e.uuid}):15==e.deviceType&&t.editForm.setFieldsValue({IPAddress:r.SimS7.IpAddress,Slot:r.SimS7.Slot,Rack:r.SimS7.Rack})}),500)}else{this.isDevice=!1;var a=this;this.$message.loading(this.$t("monitor.loading"),.5),setTimeout((function(){a.editForm.setFieldsValue({name:e.name,configurationModel:e.configUid,configurationPageUUID:e.PageUUID,description:e.description})}),500)}},changeDeviceType:function(e){this.DeviceType=e,this.getModelList()},changeModelType:function(e){for(var t=0;t<this.modelList.length;t++)if(this.modelList[t].uuid==e)return void(this.modbusConnectType=this.modelList[t].modbusConnectType);this.modbusConnectType=""},deleteRecord:function(e,t){if(1!=t){var r=this.$refs.deviceTree.checkZoneHavedDevice(e);if(r)return void this.$message.error(this.$t("monitor.ZoneHavedDevice"))}var a={uuid:e},i=this;this.$message.loading({content:"Waiting...",loadingKey:u,duration:0}),Object(s["c"])(a).then((function(t){0==t.data.code&&(i.tableDataSource=i.tableDataSource.filter((function(t){return t.key!==e})),i.selectedRows=i.selectedRows.filter((function(t){return t.key!==e})),i.$refs.deviceTree.getMonitorTree()),i.$message.destroy()}))},backZoneList:function(){this.editIsDevice=!1,this.editUuid=""},updateTable:function(e){this.tableDataSource=e}}},m=l,p=(r("cca6b"),r("2877")),v=Object(p["a"])(m,a,i,!1,null,"aafff370",null);t["default"]=v.exports},af63:function(e,t,r){"use strict";r("04b1")},cca6b:function(e,t,r){"use strict";r("999e")}}]);