(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-78fdb880"],{"2a48":function(e,t,o){"use strict";o.d(t,"f",(function(){return a})),o.d(t,"d",(function(){return d})),o.d(t,"c",(function(){return c})),o.d(t,"e",(function(){return m})),o.d(t,"b",(function(){return f})),o.d(t,"a",(function(){return g}));var i=o("1da1"),r=(o("96cf"),o("7424")),n=o("b775");function a(e){return s.apply(this,arguments)}function s(){return s=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n["g"])(r["VIDEOLIST"],n["b"].POST,t));case 1:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function d(e){return u.apply(this,arguments)}function u(){return u=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n["g"])(r["VIDEODEL"],n["b"].POST,t));case 1:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}function c(e){return l.apply(this,arguments)}function l(){return l=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n["g"])(r["VIDEOADD"],n["b"].POST,t));case 1:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function m(e){return p.apply(this,arguments)}function p(){return p=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n["g"])(r["VIDEOEDIT"],n["b"].POST,t));case 1:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function f(e){return v.apply(this,arguments)}function v(){return v=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n["g"])(r["GETVIDEOSTATUS"],n["b"].POST,t));case 1:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}function g(e){return b.apply(this,arguments)}function b(){return b=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n["g"])(r["SETVIDEOSTOPORSTART"],n["b"].POST,t));case 1:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}},"5b4a":function(e,t,o){},"646c":function(e,t,o){"use strict";o("5b4a")},"91b8":function(e,t,o){"use strict";o.r(t);var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("a-card",[o("a-button",{attrs:{type:"primary"},on:{click:function(t){e.addVisible=!0}}},[e._v(" "+e._s(e.$t("configComponent.video.AddVideo"))+" ")]),o("a-divider",{attrs:{type:"vertical"}}),o("a-button",{attrs:{disabled:e.messageShowLoad,type:"default"},on:{click:function(t){return e.getSystemVideoList()}}},[e._v(" "+e._s(e.$t("configComponent.video.VideoRefresh"))+" ")]),o("div",{staticStyle:{"margin-top":"5px"}},[o("a-table",{attrs:{rowKey:"Name",pagination:e.pagination,columns:e.columns,"data-source":e.videoList},scopedSlots:e._u([{key:"Status",fn:function(t){return o("span",{},[1==t?o("div",{staticStyle:{color:"#74f808"}},[e._v(" "+e._s(e.$t("configComponent.video.VideoOnline"))+" ")]):0==t?o("div",{staticStyle:{color:"#ea1111"}},[e._v(" "+e._s(e.$t("configComponent.video.VideoOffline"))+" ")]):e._e()])}},{key:"Opt",fn:function(t,i){return o("div",{},[o("a",{staticStyle:{cursor:"pointer",color:"#13C2C2"},attrs:{type:"link"},on:{click:function(t){return e.goToEdit(i)}}},[o("a-icon",{attrs:{type:"edit"}}),o("span",{staticStyle:{"margin-left":"2px"}},[e._v(e._s(e.$t("monitor.nodeEdit")))])],1),e._v(" | "),o("a-popconfirm",{attrs:{title:e.$t("configComponent.video.DelVideoConfirm"),"ok-text":e.$t("component.systemImageModel.delImageYes"),"cancel-text":e.$t("component.systemImageModel.delImageNo")},on:{confirm:function(t){return e.delVideo(i.uuid)}}},[o("a-icon",{staticStyle:{color:"red"},attrs:{slot:"icon",type:"question-circle-o"},slot:"icon"}),o("a-icon",{attrs:{type:"delete",theme:"twoTone","two-tone-color":"#eb2f96"}}),o("a",{staticStyle:{color:"#eb2f96"}},[e._v(e._s(e.$t("configComponent.video.DelVideo")))]),e._v(" | ")],1),i.isUsed?e._e():o("a-popconfirm",{attrs:{title:e.$t("monitor.NotUseTips"),"ok-text":e.$t("component.systemImageModel.delImageYes"),"cancel-text":e.$t("component.systemImageModel.delImageNo")},on:{confirm:function(t){return e.StopOrStartVideo(1,i.uuid)}}},[o("a",{staticStyle:{cursor:"pointer",color:"#F4A460"},attrs:{type:"link"}},[o("a-icon",{attrs:{type:"stop"}}),o("span",{staticStyle:{"margin-left":"2px"}},[e._v(e._s(e.$t("monitor.NotUse")))])],1)]),i.isUsed?o("a",{staticStyle:{cursor:"pointer",color:"#00FF00"},attrs:{type:"link"},on:{click:function(t){return e.StopOrStartVideo(0,i.uuid)}}},[o("a-icon",{attrs:{type:"play-circle"}}),o("span",{staticStyle:{"margin-left":"2px"}},[e._v(e._s(e.$t("monitor.HadUse")))])],1):e._e()],1)}}])},[e._l(e.columns,(function(t,i){return o("template",{slot:t.slotName},[o("span",{key:i},[e._v(e._s(e.$t(t.slotName)))])])}))],2)],1),o("a-modal",{attrs:{title:e.$t("configComponent.video.AddVideo")},on:{ok:e.AddVideoAction},model:{value:e.addVisible,callback:function(t){e.addVisible=t},expression:"addVisible"}},[o("a-form",{attrs:{form:e.AddForm,"label-col":{span:7},"wrapper-col":{span:12}}},[o("a-form-item",{attrs:{label:e.$t("configComponent.video.TableVideoName")}},[o("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0}]}],expression:"[\n              'name',\n              { rules: [{ required: true}] },\n            ]"}]})],1),o("a-form-item",{attrs:{label:e.$t("configComponent.video.TableVideoIP")}},[o("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["ip",{rules:[{required:!0}]}],expression:"[\n              'ip',\n              { rules: [{ required: true}] },\n            ]"}]})],1),o("a-form-item",{attrs:{label:e.$t("configComponent.video.TableVideoPort")}},[o("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["port",{rules:[{required:!0}]}],expression:"[\n              'port',\n              { rules: [{ required: true}] },\n            ]"}]})],1),o("a-form-item",{attrs:{label:e.$t("configComponent.video.RtspUrl")}},[o("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["RtspUrl",{rules:[{required:!0}]}],expression:"[\n              'RtspUrl',\n              { rules: [{ required: true}] },\n            ]"}]})],1),o("a-form-item",{attrs:{label:e.$t("configComponent.video.TableVideoUser")}},[o("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["user",{rules:[{required:!1}]}],expression:"[\n              'user',\n              { rules: [{ required: false}] },\n            ]"}]})],1),o("a-form-item",{attrs:{label:e.$t("configComponent.video.TableVideoPassword")}},[o("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!1}]}],expression:"[\n              'password',\n              { rules: [{ required: false}] },\n            ]"}]})],1)],1)],1),o("a-modal",{attrs:{title:e.$t("configComponent.video.AddVideo")},on:{ok:e.editVideoAction},model:{value:e.editVisible,callback:function(t){e.editVisible=t},expression:"editVisible"}},[o("a-form",{attrs:{form:e.EditForm,"label-col":{span:7},"wrapper-col":{span:12}}},[o("a-form-item",{attrs:{label:e.$t("configComponent.video.TableVideoName")}},[o("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0}]}],expression:"[\n              'name',\n              { rules: [{ required: true}] },\n            ]"}]})],1),o("a-form-item",{attrs:{label:e.$t("configComponent.video.TableVideoIP")}},[o("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["ip",{rules:[{required:!0}]}],expression:"[\n              'ip',\n              { rules: [{ required: true}] },\n            ]"}]})],1),o("a-form-item",{attrs:{label:e.$t("configComponent.video.TableVideoPort")}},[o("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["port",{rules:[{required:!0}]}],expression:"[\n              'port',\n              { rules: [{ required: true}] },\n            ]"}]})],1),o("a-form-item",{attrs:{label:e.$t("configComponent.video.RtspUrl")}},[o("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["RtspUrl",{rules:[{required:!0}]}],expression:"[\n              'RtspUrl',\n              { rules: [{ required: true}] },\n            ]"}]})],1),o("a-form-item",{attrs:{label:e.$t("configComponent.video.TableVideoUser")}},[o("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["user",{rules:[{required:!1}]}],expression:"[\n              'user',\n              { rules: [{ required: false}] },\n            ]"}]})],1),o("a-form-item",{attrs:{label:e.$t("configComponent.video.TableVideoPassword")}},[o("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!1}]}],expression:"[\n              'password',\n              { rules: [{ required: false}] },\n            ]"}]})],1)],1)],1)],1)},r=[],n=o("5530"),a=(o("d3b7"),o("25f0"),o("2a48")),s=o("2f62"),d={name:"VideoManager",i18n:o("89fe"),components:{},data:function(){return{editVisible:!1,AddForm:this.$form.createForm(this),EditForm:this.$form.createForm(this),radioValue:1,visible:!1,addVisible:!1,messageShowLoad:!1,videoList:[],editUuid:"",columns:[{width:"10%",slotName:"configComponent.video.TableVideoName",scopedSlots:{customRender:"Name",title:"configComponent.video.TableVideoName"},dataIndex:"Name"},{slotName:"configComponent.video.TableVideoIP",width:"10%",scopedSlots:{customRender:"IP",title:"configComponent.video.TableVideoIP"},dataIndex:"ip"},{slotName:"configComponent.video.TableVideoPort",width:"5%",scopedSlots:{customRender:"Port",title:"configComponent.video.TableVideoPort"},dataIndex:"port"},{slotName:"configComponent.video.TableVideoPassword",width:"10%",scopedSlots:{customRender:"Password",title:"configComponent.video.TableVideoPassword"},dataIndex:"password"},{slotName:"configComponent.video.TableVideoUser",width:"10%",scopedSlots:{customRender:"User",title:"configComponent.video.TableVideoUser"},dataIndex:"user"},{slotName:"configComponent.video.TableVideoStatus",width:"5%",scopedSlots:{customRender:"Status",title:"configComponent.video.TableVideoStatus"},dataIndex:"status"},{slotName:"configComponent.video.TableVideoOpt",width:"10%",scopedSlots:{customRender:"Opt",title:"configComponent.video.TableVideoOpt"}}],pagination:{pageSize:15,showSizeChanger:!0}}},computed:Object(n["a"])({},Object(s["e"])("setting",["videoServer"])),authorize:{},mounted:function(){this.getSystemVideoList()},activated:function(){},created:function(){},watch:{},methods:{goToEdit:function(e){this.editUuid=e.uuid;var t=this;this.editVisible=!0,this.$message.loading(this.$t("monitor.loading"),.5),setTimeout((function(){t.EditForm.setFieldsValue({name:e.Name,ip:e.ip,port:e.port.toString(),user:e.user,password:e.password,RtspUrl:e.url})}),500)},editVideoAction:function(){var e=this,t=this;this.EditForm.validateFields((function(o){if(!o){var i={uuid:t.editUuid,data:{name:e.EditForm.getFieldValue("name"),ip:e.EditForm.getFieldValue("ip"),port:parseInt(e.EditForm.getFieldValue("port")),user:e.EditForm.getFieldValue("user"),password:e.EditForm.getFieldValue("password"),StreamURL:e.EditForm.getFieldValue("RtspUrl")}};Object(a["e"])(i).then((function(e){0==e.data.code?(t.getSystemVideoList(),t.$message.success(t.$t("alarm.trigger.EditSuccess")),t.editVisible=!1):t.$message.success(t.$t("VideoManager.EditFailed"))}))}}))},AddVideoAction:function(){var e=this,t=this;this.AddForm.validateFields((function(o){if(!o){var i={name:e.AddForm.getFieldValue("name"),ip:e.AddForm.getFieldValue("ip"),port:parseInt(e.AddForm.getFieldValue("port")),user:e.AddForm.getFieldValue("user"),password:e.AddForm.getFieldValue("password"),url:e.AddForm.getFieldValue("RtspUrl")};Object(a["c"])(i).then((function(e){0==e.data.code?(t.getSystemVideoList(),t.addVisible=!1):t.$message.success(t.$t("alarm.trigger.AddFailed"))}))}}))},getSystemVideoList:function(){var e=this;e.messageShowLoad=!0,e.videoList=[],Object(a["f"])().then((function(t){if(null!=t.data.list)for(var o={},i=0;i<t.data.list.length;i++)o.key=t.data.list[i].Uuid,o.ip=t.data.list[i].Ip,o.Name=t.data.list[i].Name,o.port=t.data.list[i].Port,o.password=t.data.list[i].Password,o.user=t.data.list[i].User,o.status=t.data.list[i].Status,o.uuid=t.data.list[i].Uuid,o.url=t.data.list[i].StreamURL,o.isUsed=t.data.list[i].IsUsed,o.uuid=t.data.list[i].Uuid,e.videoList.push(o),o={};e.messageShowLoad=!1})).catch((function(t){e.messageShowLoad=!1}))},showModal:function(){this.visible=!0},selectVideo:function(e,t,o){var i="";i=1==e?"webrtc://"+this.videoServer+"/webrtcstream/"+t:t,this.$emit("onSelectVideo",{type:e,key:t,url:i,name:o}),this.visible=!1},delVideo:function(e){var t=this,o={uuid:e};Object(a["d"])(o).then((function(e){0==e.data.code?(t.getSystemVideoList(),t.$message.success(t.$t("component.systemImageModel.delImageSuccess"))):t.$message.error(t.$t("component.systemImageModel.delImageFailed"))}))},StopOrStartVideo:function(e,t){var o=this,i={uuid:t,data:{IsUsed:e}};Object(a["a"])(i).then((function(e){0==e.data.code?(o.getSystemVideoList(),o.$message.success(o.$t("monitor.OptResultSuccess"))):o.$message.success(o.$t("monitor.OptResultFailed"))}))},handleCancel:function(){this.visible=!1}}},u=d,c=(o("646c"),o("2877")),l=Object(c["a"])(u,i,r,!1,null,"dc2d90a4",null);t["default"]=l.exports}}]);